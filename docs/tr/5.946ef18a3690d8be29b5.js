(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{Yj9t:function(e,t,r){"use strict";r.r(t),r.d(t,"AuthModule",function(){return nt});var o=r("ofXK"),a=r("tyNb"),i=r("lJxs"),n=r("oQ8E"),s=r("fXoL"),c=r("f4AX");let l=(()=>{class e{constructor(e,t,r){this.logService=e,this.router=t,this.userService=r}canActivate(){return this.userService.account$.pipe(Object(i.a)(e=>void 0===e||(this.logService.info(n.b.Guard,this.constructor.name),this.router.parseUrl("/"))))}}return e.\u0275fac=function(t){return new(t||e)(s.Yb(n.a),s.Yb(a.b),s.Yb(c.a))},e.\u0275prov=s.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),b=(()=>{class e{constructor(e,t,r){this.logService=e,this.router=t,this.userService=r}canActivate(){const e=this.userService.jwt;return this.userService.account$.pipe(Object(i.a)(t=>void 0!==e&&void 0!==t||(this.logService.info(n.b.Guard,this.constructor.name),this.router.parseUrl("/auth"))))}}return e.\u0275fac=function(t){return new(t||e)(s.Yb(n.a),s.Yb(a.b),s.Yb(c.a))},e.\u0275prov=s.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var d=r("PCNd"),u=r("AytR"),f=r("mrSG"),m=r("LRne"),p=r("z6cu"),h=r("3E0/"),g=r("eIep"),w=function(e){return e.Admin="admin",e.Ghost="ghost",e}({}),v=function(e){return e.InvalidEmail="Invalid email",e.InvalidPassword="Invalid password",e.EmailExists="Email already exists",e.EmailConfirmed="Email already confirmed",e.EmailNotFound="Email not found",e.InvalidToken="Invalid token",e.NewPasswordMustBeDifferentFromCurrent="New password must be different from current",e}({});const y={id:42,email:"johndoe@email.com",password:"JohnDoePass123",firstName:"John",lastName:"Doe",isConfirmed:!0,createdAt:new Date("September 22, 2018 15:00:00"),updatedAt:new Date("October 12, 2020 19:00:00"),roles:[w.Ghost]},R="johndoe.test.token",k=1e3;var Q=r("Wp6s"),I=r("wZkO"),$=r("3Pt+"),P=r("XNiG"),O=r("1G5W"),B=r("vkgz"),j=r("IzEk"),z=r("tk/3");let S=(()=>{class e{constructor(e,t){this.userService=e,this.http=t,this.isUsableWithoutApi=""===u.a.apiUrl}login$(e){return this.isUsableWithoutApi?(e=>{if(e.email.toLowerCase()!==y.email)return Object(m.a)(void 0).pipe(Object(h.a)(k),Object(g.a)(()=>Object(p.a)(new Error("Invalid email"))));if(e.password!==y.password)return Object(m.a)(void 0).pipe(Object(h.a)(k),Object(g.a)(()=>Object(p.a)(new Error("Invalid password"))));const t=Object(f.b)(y,["password"]);return Object(m.a)({jwt:"ey...",account:t}).pipe(Object(h.a)(k))})(e).pipe(Object(B.a)(e=>this.userService.update(e.account,e.jwt))):this.http.post(`${u.a.apiUrl}/auth/login`,e).pipe(Object(B.a)(e=>this.userService.update(e.account,e.jwt)))}register$(e){return this.isUsableWithoutApi?(e=>e.email.toLowerCase()===y.email?Object(m.a)(void 0).pipe(Object(h.a)(k),Object(g.a)(()=>Object(p.a)(new Error("Email already exists")))):Object(m.a)({jwt:"ey...",account:{id:43,createdAt:new Date,updatedAt:new Date,firstName:e.firstName,lastName:e.lastName,email:e.email,isConfirmed:!1}}).pipe(Object(h.a)(k)))(e).pipe(Object(B.a)(e=>this.userService.update(e.account,e.jwt))):this.http.post(`${u.a.apiUrl}/auth/register`,e).pipe(Object(B.a)(e=>this.userService.update(e.account,e.jwt)))}resendConfirmationEmail$(e){return this.isUsableWithoutApi?Object(m.a)({isSuccess:!0}).pipe(Object(h.a)(2e3)):this.http.get(`${u.a.apiUrl}/auth/resend-confirmation-email/${e}`)}confirmEmail$(e){return this.isUsableWithoutApi?this.userService.account$.pipe(Object(j.a)(1),Object(g.a)(t=>((e,t)=>{if(void 0===e)return Object(p.a)(new Error(v.EmailConfirmed));if(e.isConfirmed)return Object(p.a)(new Error(v.EmailConfirmed));if(t!==R)return Object(m.a)(void 0).pipe(Object(h.a)(k),Object(g.a)(()=>Object(p.a)(new Error(v.InvalidToken))));const r=Object.assign(Object.assign({},y),{isConfirmed:!0});return Object(m.a)({jwt:"ey...",account:r}).pipe(Object(h.a)(k))})(t,e)),Object(B.a)(e=>{this.userService.update(e.account,e.jwt)})):this.http.get(`${u.a.apiUrl}/auth/confirm-email/${e}`).pipe(Object(B.a)(e=>this.userService.update(e.account,e.jwt)))}forgotPassword$(e){const t=e.toLowerCase();return this.isUsableWithoutApi?Object(m.a)({isProcessed:!0}).pipe(Object(h.a)(k)):this.http.get(`${u.a.apiUrl}/auth/forgot-password/${t}`)}resetPassword$(e,t,r){return this.isUsableWithoutApi?((e,t,r)=>t===y.id&&r===R?Object(m.a)({isProcessed:!0}).pipe(Object(h.a)(k)):Object(m.a)(void 0).pipe(Object(h.a)(k),Object(g.a)(()=>Object(p.a)(new Error(v.InvalidToken)))))(0,t,r):this.http.post(`${u.a.apiUrl}/auth/reset-password/${t}/${r}`,e)}}return e.\u0275fac=function(t){return new(t||e)(s.Yb(c.a),s.Yb(z.b))},e.\u0275prov=s.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var C=r("dNgK");let M=(()=>{class e{constructor(e){this.snackBar=e,this.horizontalPosition="center",this.verticalPosition="top"}open(e,t){return this.snackBar.open(e,void 0,{duration:3e3,horizontalPosition:this.horizontalPosition,verticalPosition:this.verticalPosition,panelClass:["mat-toolbar",`mat-${t}`]})}}return e.\u0275fac=function(t){return new(t||e)(s.Yb(C.a))},e.\u0275prov=s.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var N=r("kmnG"),V=r("qFsG"),L=r("bTqV"),E=r("NFeN"),A=r("bv9b");function D(e,t){1&e&&(s.Rb(0,"mat-error"),s.Vb(1,12),s.Qb())}function H(e,t){1&e&&(s.Rb(0,"mat-error"),s.Vb(1,13),s.Qb())}function G(e,t){1&e&&(s.Rb(0,"mat-error"),s.Vb(1,14),s.Qb())}function x(e,t){if(1&e){const e=s.Sb();s.Rb(0,"button",15),s.bc("click",function(){s.sc(e);const t=s.fc();return t.isPasswordHidden=!t.isPasswordHidden}),s.Rb(1,"mat-icon"),s.Ac(2),s.Qb(),s.Qb()}if(2&e){const e=s.fc();s.Bb(2),s.Bc(e.isPasswordHidden?"visibility_off":"visibility")}}function q(e,t){1&e&&(s.Rb(0,"mat-error"),s.Vb(1,16),s.Qb())}function F(e,t){1&e&&(s.Rb(0,"mat-error"),s.Vb(1,17),s.Qb())}function T(e,t){1&e&&s.Mb(0,"mat-progress-bar",18)}function Y(e,t){1&e&&(s.Rb(0,"button",19),s.Vb(1,20),s.Qb())}function U(e,t){if(1&e&&(s.Rb(0,"button",21),s.Rb(1,"span"),s.Vb(2,22),s.Qb(),s.Rb(3,"mat-icon"),s.Ac(4,"send"),s.Qb(),s.Qb()),2&e){const e=s.fc();s.kc("disabled",!e.formGroup.valid)}}let _=(()=>{class e{constructor(e,t,r,o){this.formBuilder=e,this.authService=t,this.router=r,this.snackbarService=o,this.errorHappens=new s.n,this.isLoading=!1,this.isPasswordHidden=!0,this.errorMessage="",this.isDestroyed$=new P.a,this.formGroup=this.createFormGroup("change")}get f(){return this.formGroup.controls}ngOnInit(){}ngOnDestroy(){this.isDestroyed$.next(!0),this.isDestroyed$.complete()}onSubmit(){var e,t;return this.isLoading=!0,this.formGroup.disable(),this.isPasswordHidden=!0,this.authService.login$({email:null===(e=this.f.identifier)||void 0===e?void 0:e.value,password:null===(t=this.f.password)||void 0===t?void 0:t.value}).pipe(Object(O.a)(this.isDestroyed$)).subscribe(e=>this.router.navigate(["/"]),e=>{this.errorHappens.emit(e.message),this.errorMessage=e.message,this.isLoading=!1,this.formGroup.enable()})}createFormGroup(e,t){const r=this.formBuilder.group({identifier:[void 0,[$.m.required,$.m.email]],password:[void 0,[$.m.required]]},{updateOn:e,validators:this.mustNotBeRejectedValidator()});return void 0!==t&&r.setValue(t),r}mustNotBeRejectedValidator(){return()=>{this.errorMessage===v.InvalidEmail?this.f.identifier.setErrors({mustNotBeRejected:!0}):this.errorMessage===v.InvalidPassword?this.f.password.setErrors({mustNotBeRejected:!0}):""!==this.errorMessage&&this.snackbarService.open(this.errorMessage,"warn"),this.errorMessage=""}}}return e.\u0275fac=function(t){return new(t||e)(s.Lb($.b),s.Lb(S),s.Lb(a.b),s.Lb(M))},e.\u0275cmp=s.Fb({type:e,selectors:[["app-login-form"]],outputs:{errorHappens:"errorHappens"},decls:19,vars:11,consts:function(){let e,t,r,o,a,i,n,s,c,l;return e="Email address",t="Password",r="Toggle password visibility",o="You must fill in this field",a="Please check your identifier",i="Not a valid email",n="You must fill in this field",s="Please check your password",c="Forgot password",l="Submit",[[3,"formGroup","ngSubmit"],["appearance","outline","color","accent",1,"form-field"],e,["matInput","","formControlName","identifier","autocomplete","email","type","email"],[4,"ngIf"],["matInput","","formControlName","password","id","current-password","autocomplete","current-password",3,"type"],t,["type","button","mat-icon-button","","matSuffix","","aria-label",r,3,"click",4,"ngIf"],[1,"button-group","mt-20"],["mode","indeterminate","color","accent",4,"ngIf"],["type","button","mat-button","","color","accent","routerLink","/auth/forgot-password",4,"ngIf"],["mat-raised-button","","class","icon-after rounded","color","accent","type","submit",3,"disabled",4,"ngIf"],o,a,i,["type","button","mat-icon-button","","matSuffix","","aria-label",r,3,"click"],n,s,["mode","indeterminate","color","accent"],["type","button","mat-button","","color","accent","routerLink","/auth/forgot-password"],c,["mat-raised-button","","color","accent","type","submit",1,"icon-after","rounded",3,"disabled"],l]},template:function(e,t){1&e&&(s.Rb(0,"form",0),s.bc("ngSubmit",function(){return t.onSubmit()}),s.Rb(1,"mat-form-field",1),s.Rb(2,"mat-label"),s.Vb(3,2),s.Qb(),s.Mb(4,"input",3),s.yc(5,D,2,0,"mat-error",4),s.yc(6,H,2,0,"mat-error",4),s.yc(7,G,2,0,"mat-error",4),s.Qb(),s.Rb(8,"mat-form-field",1),s.Mb(9,"input",5),s.Rb(10,"mat-label"),s.Vb(11,6),s.Qb(),s.yc(12,x,3,1,"button",7),s.yc(13,q,2,0,"mat-error",4),s.yc(14,F,2,0,"mat-error",4),s.Qb(),s.Rb(15,"div",8),s.yc(16,T,1,0,"mat-progress-bar",9),s.yc(17,Y,2,0,"button",10),s.yc(18,U,5,1,"button",11),s.Qb(),s.Qb()),2&e&&(s.kc("formGroup",t.formGroup),s.Bb(5),s.kc("ngIf",null==t.f.identifier||null==t.f.identifier.errors?null:t.f.identifier.errors.required),s.Bb(1),s.kc("ngIf",null==t.f.identifier||null==t.f.identifier.errors?null:t.f.identifier.errors.mustNotBeRejected),s.Bb(1),s.kc("ngIf",null==t.f.identifier||null==t.f.identifier.errors?null:t.f.identifier.errors.email),s.Bb(2),s.kc("type",t.isPasswordHidden?"password":"text"),s.Bb(3),s.kc("ngIf",!t.isLoading),s.Bb(1),s.kc("ngIf",null==t.f.password||null==t.f.password.errors?null:t.f.password.errors.required),s.Bb(1),s.kc("ngIf",null==t.f.password||null==t.f.password.errors?null:t.f.password.errors.mustNotBeRejected),s.Bb(2),s.kc("ngIf",t.isLoading),s.Bb(1),s.kc("ngIf",!t.isLoading),s.Bb(1),s.kc("ngIf",!t.isLoading))},directives:[$.n,$.i,$.d,N.c,N.f,V.a,$.a,$.h,$.c,o.k,N.b,L.b,N.g,E.a,A.a,a.c],styles:[".form-field[_ngcontent-%COMP%]{width:100%}.button-group[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between}"],changeDetection:0}),e})();function W(e,t){return r=>{const o=r.controls[t];(null===o.errors||o.errors.mustMatch)&&o.setErrors(r.controls[e].value!==o.value?{mustMatch:!0}:null)}}var J=r("0IaG");let X=(()=>{class e{constructor(e){this.dialogRef=e}ngOnInit(){}onClose(){this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(s.Lb(J.e))},e.\u0275cmp=s.Fb({type:e,selectors:[["app-confirm-email-dialog"]],decls:8,vars:0,consts:function(){let e,t,r;return e="Check your mailbox",t="A confirmation email has been sent, please check your inbox and follow the link in the email to confirm your registration.",r="Ok",[["matDialogTitle",""],e,t,["mat-dialog-actions",""],["mat-raised-button","","color","accent",1,"rounded",3,"click"],r]},template:function(e,t){1&e&&(s.Rb(0,"h2",0),s.Vb(1,1),s.Qb(),s.Rb(2,"mat-dialog-content"),s.Rb(3,"p"),s.Vb(4,2),s.Qb(),s.Qb(),s.Rb(5,"div",3),s.Rb(6,"button",4),s.bc("click",function(){return t.onClose()}),s.Vb(7,5),s.Qb(),s.Qb())},directives:[J.f,J.c,J.b,L.b],styles:[""],changeDetection:0}),e})();function K(e,t){1&e&&(s.Rb(0,"mat-error"),s.Vb(1,19),s.Qb())}function Z(e,t){1&e&&(s.Rb(0,"mat-error"),s.Vb(1,20),s.Qb())}function ee(e,t){1&e&&(s.Rb(0,"mat-error"),s.Vb(1,21),s.Qb())}function te(e,t){1&e&&(s.Rb(0,"mat-error"),s.Vb(1,22),s.Qb())}function re(e,t){1&e&&(s.Rb(0,"mat-error"),s.Vb(1,23),s.Qb())}function oe(e,t){1&e&&(s.Rb(0,"mat-error"),s.Vb(1,24),s.Qb())}function ae(e,t){1&e&&(s.Rb(0,"mat-error"),s.Vb(1,25),s.Qb())}function ie(e,t){1&e&&(s.Rb(0,"mat-error"),s.Vb(1,26),s.Qb())}function ne(e,t){1&e&&(s.Rb(0,"mat-error"),s.Vb(1,27),s.Qb())}function se(e,t){1&e&&(s.Rb(0,"mat-error"),s.Vb(1,28),s.Qb())}function ce(e,t){1&e&&(s.Rb(0,"mat-error"),s.Vb(1,29),s.Qb())}function le(e,t){1&e&&s.Mb(0,"mat-progress-bar",30)}function be(e,t){if(1&e&&(s.Rb(0,"button",31),s.Rb(1,"span"),s.Vb(2,32),s.Qb(),s.Rb(3,"mat-icon"),s.Ac(4,"send"),s.Qb(),s.Qb()),2&e){const e=s.fc();s.kc("disabled",!e.formGroup.valid)}}let de=(()=>{class e{constructor(e,t,r,o,a){this.formBuilder=e,this.authService=t,this.router=r,this.snackbarService=o,this.dialog=a,this.errorHappens=new s.n,this.isLoading=!1,this.isPasswordHidden=!0,this.errorMessage="",this.isDestroyed$=new P.a,this.formGroup=this.createFormGroup("change")}get f(){return this.formGroup.controls}ngOnInit(){}ngOnDestroy(){this.isDestroyed$.next(!0),this.isDestroyed$.complete()}onSubmit(){var e,t,r,o;return this.isLoading=!0,this.formGroup.disable(),this.isPasswordHidden=!0,this.authService.register$({firstName:null===(e=this.f.firstName)||void 0===e?void 0:e.value,lastName:null===(t=this.f.lastName)||void 0===t?void 0:t.value,email:null===(r=this.f.email)||void 0===r?void 0:r.value,password:null===(o=this.f.password)||void 0===o?void 0:o.value}).pipe(Object(g.a)(e=>this.dialog.open(X).afterClosed()),Object(O.a)(this.isDestroyed$)).subscribe(e=>this.router.navigate(["/"]),e=>{this.errorHappens.emit(e.message),this.errorMessage=e.message,this.isLoading=!1,this.formGroup.enable()})}onCloseDialog(){return this.dialog.closeAll(),this.router.navigate(["home"])}createFormGroup(e,t){const r=this.formBuilder.group({firstName:[null,[$.m.required]],lastName:[null,[$.m.required]],email:[null,[$.m.required,$.m.email]],password:[null,[$.m.required,$.m.pattern(/^.{8,255}$/)]],confirmPassword:[null,[$.m.required]]},{updateOn:e,validators:[W("password","confirmPassword"),this.mustNotBeRejectedValidator()]});return void 0!==t&&r.setValue(t),r}mustNotBeRejectedValidator(){return e=>{this.errorMessage===v.EmailExists?e.controls.email.setErrors({mustNotBeRejected:!0}):""!==this.errorMessage&&this.snackbarService.open(this.errorMessage,"warn"),this.errorMessage=""}}}return e.\u0275fac=function(t){return new(t||e)(s.Lb($.b),s.Lb(S),s.Lb(a.b),s.Lb(M),s.Lb(J.a))},e.\u0275cmp=s.Fb({type:e,selectors:[["app-register-form"]],outputs:{errorHappens:"errorHappens"},decls:42,vars:22,consts:function(){let e,t,r,o,a,i,n,s,c,l,b,d,u,f,m,p,h,g,w;return e="First name",t="Last name",r="Email address",o="Password",a="Toggle password visibility",i="Confirm password",n="Toggle password visibility",s="You must fill in this field",c="Must contain 2-50 alphanumeric characters",l="You must fill in this field",b="Must contain 2-50 alphanumeric characters",d="You must fill in this field",u="Not a valid email",f="Email is already taken",m="You must fill in this field",p="Must contain 8+ characters",h="Passwords doesn't match",g="You must fill in this field ",w="Submit",[[3,"formGroup","ngSubmit"],["appearance","outline","color","accent",1,"form-field"],e,["matInput","","formControlName","firstName","color","primary","autocomplete","given-name","required",""],[4,"ngIf"],t,["matInput","","formControlName","lastName","color","primary","autocomplete","family-name","required",""],r,["matInput","","formControlName","email","color","primary","autocomplete","email","type","email","required",""],["matInput","","formControlName","password","id","new-password","autocomplete","new-password","required","",3,"type"],o,["type","button","mat-icon-button","","matSuffix","","aria-label",a,3,"click"],["matInput","","formControlName","confirmPassword","required","",3,"type"],i,["type","button","mat-icon-button","","matSuffix","","aria-label",n,3,"click"],[1,"button-group","mt-20"],["mode","indeterminate","color","accent",4,"ngIf"],[1,"fill-remaining-space"],["mat-raised-button","","class","icon-after rounded","color","accent","type","submit",3,"disabled",4,"ngIf"],s,c,l,b,d,u,f,m,p,h,g,["mode","indeterminate","color","accent"],["mat-raised-button","","color","accent","type","submit",1,"icon-after","rounded",3,"disabled"],w]},template:function(e,t){1&e&&(s.Rb(0,"form",0),s.bc("ngSubmit",function(){return t.onSubmit()}),s.Rb(1,"mat-form-field",1),s.Rb(2,"mat-label"),s.Vb(3,2),s.Qb(),s.Mb(4,"input",3),s.yc(5,K,2,0,"mat-error",4),s.yc(6,Z,2,0,"mat-error",4),s.Qb(),s.Rb(7,"mat-form-field",1),s.Rb(8,"mat-label"),s.Vb(9,5),s.Qb(),s.Mb(10,"input",6),s.yc(11,ee,2,0,"mat-error",4),s.yc(12,te,2,0,"mat-error",4),s.Qb(),s.Rb(13,"mat-form-field",1),s.Rb(14,"mat-label"),s.Vb(15,7),s.Qb(),s.Mb(16,"input",8),s.yc(17,re,2,0,"mat-error",4),s.yc(18,oe,2,0,"mat-error",4),s.yc(19,ae,2,0,"mat-error",4),s.Qb(),s.Rb(20,"mat-form-field",1),s.Mb(21,"input",9),s.Rb(22,"mat-label"),s.Vb(23,10),s.Qb(),s.Rb(24,"button",11),s.bc("click",function(){return t.isPasswordHidden=!t.isPasswordHidden}),s.Rb(25,"mat-icon"),s.Ac(26),s.Qb(),s.Qb(),s.yc(27,ie,2,0,"mat-error",4),s.yc(28,ne,2,0,"mat-error",4),s.Qb(),s.Rb(29,"mat-form-field",1),s.Mb(30,"input",12),s.Rb(31,"mat-label"),s.Vb(32,13),s.Qb(),s.Rb(33,"button",14),s.bc("click",function(){return t.isPasswordHidden=!t.isPasswordHidden}),s.Rb(34,"mat-icon"),s.Ac(35),s.Qb(),s.Qb(),s.yc(36,se,2,0,"mat-error",4),s.yc(37,ce,2,0,"mat-error",4),s.Qb(),s.Rb(38,"div",15),s.yc(39,le,1,0,"mat-progress-bar",16),s.Mb(40,"span",17),s.yc(41,be,5,1,"button",18),s.Qb(),s.Qb()),2&e&&(s.kc("formGroup",t.formGroup),s.Bb(5),s.kc("ngIf",null==t.f.firstName||null==t.f.firstName.errors?null:t.f.firstName.errors.required),s.Bb(1),s.kc("ngIf",null==t.f.firstName||null==t.f.firstName.errors?null:t.f.firstName.errors.pattern),s.Bb(5),s.kc("ngIf",null==t.f.lastName||null==t.f.lastName.errors?null:t.f.lastName.errors.required),s.Bb(1),s.kc("ngIf",null==t.f.lastName||null==t.f.lastName.errors?null:t.f.lastName.errors.pattern),s.Bb(5),s.kc("ngIf",null==t.f.email||null==t.f.email.errors?null:t.f.email.errors.required),s.Bb(1),s.kc("ngIf",null==t.f.email||null==t.f.email.errors?null:t.f.email.errors.email),s.Bb(1),s.kc("ngIf",null==t.f.email||null==t.f.email.errors?null:t.f.email.errors.mustNotBeRejected),s.Bb(2),s.kc("type",t.isPasswordHidden?"password":"text"),s.Bb(3),s.Cb("aria-label","isPasswordHidden password")("aria-pressed",t.isPasswordHidden),s.Bb(2),s.Bc(t.isPasswordHidden?"visibility_off":"visibility"),s.Bb(1),s.kc("ngIf",null==t.f.password||null==t.f.password.errors?null:t.f.password.errors.required),s.Bb(1),s.kc("ngIf",null==t.f.password||null==t.f.password.errors?null:t.f.password.errors.pattern),s.Bb(2),s.kc("type",t.isPasswordHidden?"password":"text"),s.Bb(3),s.Cb("aria-label","isPasswordHidden password")("aria-pressed",t.isPasswordHidden),s.Bb(2),s.Cc(" ",t.isPasswordHidden?"visibility_off":"visibility"," "),s.Bb(1),s.kc("ngIf",null==t.f.confirmPassword||null==t.f.confirmPassword.errors?null:t.f.confirmPassword.errors.mustMatch),s.Bb(1),s.kc("ngIf",null==t.f.confirmPassword||null==t.f.confirmPassword.errors?null:t.f.confirmPassword.errors.required),s.Bb(2),s.kc("ngIf",t.isLoading),s.Bb(2),s.kc("ngIf",!t.isLoading))},directives:[$.n,$.i,$.d,N.c,N.f,V.a,$.a,$.h,$.c,$.l,o.k,L.b,N.g,E.a,N.b,A.a],styles:[".form-field[_ngcontent-%COMP%]{width:100%}.button-group[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between}"],changeDetection:0}),e})();function ue(e,t){if(1&e){const e=s.Sb();s.Rb(0,"mat-card-content",7),s.Rb(1,"app-login-form",8),s.bc("errorHappens",function(t){return s.sc(e),s.fc().onErrorHappens(t)}),s.Qb(),s.Qb()}}function fe(e,t){if(1&e){const e=s.Sb();s.Rb(0,"mat-card-content",7),s.Rb(1,"app-register-form",8),s.bc("errorHappens",function(t){return s.sc(e),s.fc().onErrorHappens(t)}),s.Qb(),s.Qb()}}function me(e,t){if(1&e&&(s.Rb(0,"p",9),s.Rb(1,"b"),s.Ac(2,"Test:"),s.Qb(),s.Ac(3),s.Qb()),2&e){const e=s.fc();s.Bb(3),s.Dc(" ",null==e.mockUser?null:e.mockUser.email," / ",null==e.mockUser?null:e.mockUser.password,"")}}const pe=function(e){return{"anime-wobble":e}};let he=(()=>{class e{constructor(e){this.changeDetectorRef=e,this.errorMessage="",this.isUsableWithoutApi=""===u.a.apiUrl,this.mockUser=y}ngOnInit(){}onErrorHappens(e){this.errorMessage=e,this.changeDetectorRef.detectChanges(),setTimeout(()=>{this.errorMessage=""},500)}}return e.\u0275fac=function(t){return new(t||e)(s.Lb(s.h))},e.\u0275cmp=s.Fb({type:e,selectors:[["app-auth"]],decls:8,vars:4,consts:function(){let e,t;return e="Log in",t="Register",[[1,"centred","anime-zoom-in"],[1,"p-0","card-alone",3,"ngClass"],["mat-stretch-tabs","","animationDuration","0ms","color","accent"],["label",e],["matTabContent",""],["label",t],["style","margin: 10px;",4,"ngIf"],[1,"m-0","p-16"],[3,"errorHappens"],[2,"margin","10px"]]},template:function(e,t){1&e&&(s.Rb(0,"section",0),s.Rb(1,"mat-card",1),s.Rb(2,"mat-tab-group",2),s.Rb(3,"mat-tab",3),s.yc(4,ue,2,0,"ng-template",4),s.Qb(),s.Rb(5,"mat-tab",5),s.yc(6,fe,2,0,"ng-template",4),s.Qb(),s.Qb(),s.Qb(),s.yc(7,me,4,2,"p",6),s.Qb()),2&e&&(s.Bb(1),s.kc("ngClass",s.nc(2,pe,!!t.errorMessage)),s.Bb(6),s.kc("ngIf",t.isUsableWithoutApi))},directives:[Q.a,o.i,I.c,I.a,I.b,o.k,Q.b,_,de],styles:[""],changeDetection:0}),e})();var ge=r("nYR2"),we=r("Xa2L");function ve(e,t){1&e&&s.Nb(0)}function ye(e,t){if(1&e&&(s.Pb(0),s.yc(1,ve,1,0,"ng-container",9),s.Ob()),2&e){const e=s.fc(3),t=s.qc(5),r=s.qc(9);s.Bb(1),s.kc("ngIf",null==e.account?null:e.account.isConfirmed)("ngIfThen",t)("ngIfElse",r)}}function Re(e,t){if(1&e&&(s.Pb(0),s.yc(1,ye,2,3,"ng-container",8),s.Ob()),2&e){const e=s.fc(2),t=s.qc(7);s.Bb(1),s.kc("ngIf",e.token)("ngIfElse",t)}}function ke(e,t){if(1&e&&(s.Rb(0,"mat-card",7),s.yc(1,Re,2,2,"ng-container",8),s.Qb()),2&e){const e=s.fc(),t=s.qc(11);s.Bb(1),s.kc("ngIf",!e.isAccountAlreadyConfirmed)("ngIfElse",t)}}function Qe(e,t){1&e&&s.Mb(0,"mat-spinner",10)}function Ie(e,t){if(1&e&&(s.Rb(0,"div",11),s.Rb(1,"mat-icon",12),s.Ac(2,"done"),s.Qb(),s.Qb(),s.Rb(3,"p"),s.Vb(4,13),s.Qb(),s.Rb(5,"div",14),s.Mb(6,"span",15),s.Rb(7,"button",16),s.Vb(8,17),s.Qb(),s.Qb()),2&e){const e=s.fc();s.Bb(4),s.Xb(e.account.firstName),s.Wb(4)}}function $e(e,t){1&e&&s.Mb(0,"mat-progress-bar",23)}function Pe(e,t){if(1&e){const e=s.Sb();s.Rb(0,"button",24),s.bc("click",function(){return s.sc(e),s.fc(2).onRequestConfirmEmail()}),s.Rb(1,"span"),s.Vb(2,25),s.Qb(),s.Rb(3,"mat-icon"),s.Ac(4,"send"),s.Qb(),s.Qb()}}function Oe(e,t){if(1&e&&(s.Rb(0,"div",11),s.Rb(1,"mat-icon",12),s.Ac(2,"error_outline"),s.Qb(),s.Qb(),s.Rb(3,"p"),s.Vb(4,18),s.Qb(),s.Rb(5,"p"),s.Vb(6,19),s.Qb(),s.Rb(7,"div",14),s.yc(8,$e,1,0,"mat-progress-bar",20),s.Mb(9,"span",21),s.yc(10,Pe,5,0,"button",22),s.Qb()),2&e){const e=s.fc();s.Bb(8),s.kc("ngIf",e.isProcessing),s.Bb(2),s.kc("ngIf",!e.isProcessing)}}function Be(e,t){1&e&&s.Mb(0,"mat-progress-bar",23)}function je(e,t){if(1&e){const e=s.Sb();s.Rb(0,"button",24),s.bc("click",function(){return s.sc(e),s.fc(2).onRequestConfirmEmail()}),s.Rb(1,"span"),s.Vb(2,29),s.Qb(),s.Rb(3,"mat-icon"),s.Ac(4,"send"),s.Qb(),s.Qb()}}function ze(e,t){if(1&e&&(s.Rb(0,"div",11),s.Rb(1,"mat-icon",12),s.Ac(2,"error_outline"),s.Qb(),s.Qb(),s.Rb(3,"p",26),s.Vb(4,27),s.Qb(),s.Rb(5,"p"),s.Vb(6,28),s.Qb(),s.Rb(7,"div",14),s.yc(8,Be,1,0,"mat-progress-bar",20),s.Mb(9,"span",21),s.yc(10,je,5,0,"button",22),s.Qb()),2&e){const e=s.fc();s.Bb(8),s.kc("ngIf",e.isProcessing),s.Bb(2),s.kc("ngIf",!e.isProcessing)}}function Se(e,t){1&e&&(s.Rb(0,"div",11),s.Rb(1,"mat-icon",12),s.Ac(2,"done"),s.Qb(),s.Qb(),s.Rb(3,"p"),s.Vb(4,30),s.Qb(),s.Rb(5,"div",14),s.Mb(6,"span",15),s.Rb(7,"button",16),s.Vb(8,31),s.Qb(),s.Qb())}let Ce=(()=>{class e{constructor(e,t,r,o,a,i){this.activatedRoute=e,this.changeDetectorRef=t,this.authService=r,this.userService=o,this.dialog=a,this.router=i,this.isLoading=!1,this.isProcessing=!1,this.isAccountAlreadyConfirmed=!1,this.token=void 0,this.account=void 0,this.isDestroyed$=new P.a}ngOnInit(){this.userService.account$.pipe(Object(O.a)(this.isDestroyed$)).subscribe(e=>{var t,r;return this.isAccountAlreadyConfirmed=null!==(t=null==e?void 0:e.isConfirmed)&&void 0!==t&&t,this.token=null!==(r=this.activatedRoute.snapshot.paramMap.get("token"))&&void 0!==r?r:void 0,void 0===this.token?void 0:this.verifyToken(this.token)}).unsubscribe()}ngOnDestroy(){this.isDestroyed$.next(!0),this.isDestroyed$.complete()}onRequestConfirmEmail(){return this.isProcessing=!0,this.userService.account$.pipe(Object(g.a)(e=>{var t;return this.authService.resendConfirmationEmail$(null===(t=e)||void 0===t?void 0:t.email)}),Object(g.a)(e=>this.dialog.open(X).afterClosed()),Object(O.a)(this.isDestroyed$)).subscribe(e=>this.router.navigate(["/"]))}verifyToken(e){return this.isAccountAlreadyConfirmed=!1,this.isLoading=!0,this.authService.confirmEmail$(e).pipe(Object(ge.a)(()=>{this.isLoading=!1,this.changeDetectorRef.detectChanges()}),Object(O.a)(this.isDestroyed$)).subscribe(e=>{this.account=e.account,this.changeDetectorRef.detectChanges()},e=>{var t;(null===(t=e)||void 0===t?void 0:t.message)===v.EmailConfirmed&&(this.isAccountAlreadyConfirmed=!0,this.changeDetectorRef.detectChanges())})}}return e.\u0275fac=function(t){return new(t||e)(s.Lb(a.a),s.Lb(s.h),s.Lb(S),s.Lb(c.a),s.Lb(J.a),s.Lb(a.b))},e.\u0275cmp=s.Fb({type:e,selectors:[["app-confirm-email"]],decls:12,vars:2,consts:function(){let e,t,r,o,a,i,n,s,c,l;return e="Welcome " + "\ufffd0\ufffd" + " ! Your are now a confirmed user !",t="Continue",r="You have not confirmed your email address, verify your inbox and click on the link in the email to continue.",o="You can request a new verification link if the old one has expired.",a="Resend",i="Could not confirm your address.",n="You can request a new verification link if the old one has expired.",s="Resend",c="Everything is ready, your email address has already been verified.",l="Continue",[[1,"centred"],["class","card-alone",4,"ngIf","ngIfElse"],["loadingTemplate",""],["emailConfirmedTemplate",""],["emailNotConfirmedTemplate",""],["emailConfirmErrorTemplate",""],["alreadyConfirmedEmailTemplate",""],[1,"card-alone"],[4,"ngIf","ngIfElse"],[4,"ngIf","ngIfThen","ngIfElse"],["color","accent","diameter","60",1,"m-16"],[1,"center","pb-16"],[1,"status-icon"],e,[1,"button-group","mt-16"],[1,"fill-remain-space"],["mat-raised-button","","color","accent","routerLink","/",1,"rounded"],t,r,o,["mode","indeterminate","color","accent","class","mt-16",4,"ngIf"],[1,"fill-remaining-space"],["mat-raised-button","","class","icon-after rounded","color","accent",3,"click",4,"ngIf"],["mode","indeterminate","color","accent",1,"mt-16"],["mat-raised-button","","color","accent",1,"icon-after","rounded",3,"click"],a,[1,"center"],i,n,s,c,l]},template:function(e,t){if(1&e&&(s.Rb(0,"section",0),s.yc(1,ke,2,2,"mat-card",1),s.Qb(),s.yc(2,Qe,1,0,"ng-template",null,2,s.zc),s.yc(4,Ie,9,1,"ng-template",null,3,s.zc),s.yc(6,Oe,11,2,"ng-template",null,4,s.zc),s.yc(8,ze,11,2,"ng-template",null,5,s.zc),s.yc(10,Se,9,0,"ng-template",null,6,s.zc)),2&e){const e=s.qc(3);s.Bb(1),s.kc("ngIf",!t.isLoading)("ngIfElse",e)}},directives:[o.k,Q.a,we.b,E.a,L.b,a.c,A.a],styles:[".button-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.status-icon[_ngcontent-%COMP%]{font-size:75px;height:75px;width:75px}"],changeDetection:0}),e})(),Me=(()=>{class e{constructor(e){this.dialogRef=e}ngOnInit(){}onClose(){this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(s.Lb(J.e))},e.\u0275cmp=s.Fb({type:e,selectors:[["app-forgot-password-dialog"]],decls:8,vars:0,consts:function(){let e,t,r;return e="Check your mailbox",t="If your email address exists in our database, you will receive a password recovery link at your email address in a few minutes.",r="Ok",[["matDialogTitle",""],e,t,["mat-dialog-actions",""],["mat-raised-button","","color","accent",1,"rounded",3,"click"],r]},template:function(e,t){1&e&&(s.Rb(0,"h2",0),s.Vb(1,1),s.Qb(),s.Rb(2,"mat-dialog-content"),s.Rb(3,"p"),s.Vb(4,2),s.Qb(),s.Qb(),s.Rb(5,"div",3),s.Rb(6,"button",4),s.bc("click",function(){return t.onClose()}),s.Vb(7,5),s.Qb(),s.Qb())},directives:[J.f,J.c,J.b,L.b],styles:[""],changeDetection:0}),e})();function Ne(e,t){1&e&&(s.Rb(0,"mat-error"),s.Vb(1,14),s.Qb())}function Ve(e,t){1&e&&(s.Rb(0,"mat-error"),s.Vb(1,15),s.Qb())}function Le(e,t){1&e&&(s.Rb(0,"mat-error"),s.Vb(1,16),s.Qb())}function Ee(e,t){1&e&&s.Mb(0,"mat-progress-bar",17)}function Ae(e,t){1&e&&(s.Rb(0,"button",18),s.Vb(1,19),s.Qb())}function De(e,t){if(1&e&&(s.Rb(0,"button",20),s.Rb(1,"span"),s.Vb(2,21),s.Qb(),s.Rb(3,"mat-icon"),s.Ac(4,"send"),s.Qb(),s.Qb()),2&e){const e=s.fc();s.kc("disabled",!e.formGroup.valid)}}function He(e,t){1&e&&s.Nb(0)}function Ge(e,t){if(1&e&&(s.Pb(0),s.yc(1,He,1,0,"ng-container",7),s.Ob()),2&e){s.fc();const e=s.qc(8);s.Bb(1),s.kc("ngTemplateOutlet",e)}}function xe(e,t){1&e&&s.Nb(0)}function qe(e,t){if(1&e&&(s.Pb(0),s.yc(1,xe,1,0,"ng-container",7),s.Ob()),2&e){s.fc();const e=s.qc(12);s.Bb(1),s.kc("ngTemplateOutlet",e)}}function Fe(e,t){1&e&&s.Nb(0)}function Te(e,t){if(1&e&&(s.Pb(0),s.yc(1,Fe,1,0,"ng-container",7),s.Ob()),2&e){s.fc();const e=s.qc(10);s.Bb(1),s.kc("ngTemplateOutlet",e)}}function Ye(e,t){1&e&&s.Mb(0,"mat-spinner",8)}function Ue(e,t){1&e&&(s.Rb(0,"mat-error"),s.Vb(1,23),s.Qb())}function _e(e,t){1&e&&(s.Rb(0,"mat-error"),s.Vb(1,24),s.Qb())}function We(e,t){1&e&&(s.Rb(0,"mat-error"),s.Vb(1,25),s.Qb())}function Je(e,t){1&e&&(s.Rb(0,"mat-error"),s.Vb(1,26),s.Qb())}function Xe(e,t){1&e&&(s.Rb(0,"mat-error"),s.Vb(1,27),s.Qb())}function Ke(e,t){1&e&&s.Mb(0,"mat-progress-bar",28)}function Ze(e,t){if(1&e&&(s.Rb(0,"button",29),s.Rb(1,"span"),s.Vb(2,30),s.Qb(),s.Rb(3,"mat-icon"),s.Ac(4,"send"),s.Qb(),s.Qb()),2&e){const e=s.fc(2);s.kc("disabled",!e.formGroup.valid)}}function et(e,t){if(1&e){const e=s.Sb();s.Rb(0,"mat-card-title"),s.Vb(1,9),s.Qb(),s.Rb(2,"mat-card-content",10),s.Rb(3,"form",11),s.bc("ngSubmit",function(){return s.sc(e),s.fc().onSubmit()}),s.Rb(4,"mat-form-field",12),s.Mb(5,"input",13),s.Rb(6,"mat-label"),s.Vb(7,14),s.Qb(),s.Rb(8,"button",15),s.bc("click",function(){s.sc(e);const t=s.fc();return t.isPasswordHidden=!t.isPasswordHidden}),s.Rb(9,"mat-icon"),s.Ac(10),s.Qb(),s.Qb(),s.yc(11,Ue,2,0,"mat-error",2),s.yc(12,_e,2,0,"mat-error",2),s.yc(13,We,2,0,"mat-error",2),s.Qb(),s.Rb(14,"mat-form-field",12),s.Mb(15,"input",16),s.Rb(16,"mat-label"),s.Vb(17,17),s.Qb(),s.Rb(18,"button",18),s.bc("click",function(){s.sc(e);const t=s.fc();return t.isPasswordHidden=!t.isPasswordHidden}),s.Rb(19,"mat-icon"),s.Ac(20),s.Qb(),s.Qb(),s.yc(21,Je,2,0,"mat-error",2),s.yc(22,Xe,2,0,"mat-error",2),s.Qb(),s.Rb(23,"div",19),s.yc(24,Ke,1,0,"mat-progress-bar",20),s.Mb(25,"span",21),s.yc(26,Ze,5,1,"button",22),s.Qb(),s.Qb(),s.Qb()}if(2&e){const e=s.fc();s.Bb(3),s.kc("formGroup",e.formGroup),s.Bb(2),s.kc("type",e.isPasswordHidden?"password":"text"),s.Bb(3),s.Cb("aria-label","isPasswordHidden password")("aria-pressed",e.isPasswordHidden),s.Bb(2),s.Bc(e.isPasswordHidden?"visibility_off":"visibility"),s.Bb(1),s.kc("ngIf",null==e.f.password||null==e.f.password.errors?null:e.f.password.errors.required),s.Bb(1),s.kc("ngIf",null==e.f.password||null==e.f.password.errors?null:e.f.password.errors.pattern),s.Bb(1),s.kc("ngIf",null==e.f.password||null==e.f.password.errors?null:e.f.password.errors.mustNotBeRejected),s.Bb(2),s.kc("type",e.isPasswordHidden?"password":"text"),s.Bb(3),s.Cb("aria-label","isPasswordHidden password")("aria-pressed",e.isPasswordHidden),s.Bb(2),s.Cc(" ",e.isPasswordHidden?"visibility_off":"visibility"," "),s.Bb(1),s.kc("ngIf",null==e.f.confirmPassword||null==e.f.confirmPassword.errors?null:e.f.confirmPassword.errors.mustMatch),s.Bb(1),s.kc("ngIf",null==e.f.confirmPassword||null==e.f.confirmPassword.errors?null:e.f.confirmPassword.errors.required),s.Bb(2),s.kc("ngIf",e.isFormSubmitted),s.Bb(2),s.kc("ngIf",!e.isFormSubmitted)}}function tt(e,t){1&e&&s.Mb(0,"mat-progress-bar",28)}function rt(e,t){1&e&&(s.Rb(0,"button",37),s.Rb(1,"span"),s.Vb(2,38),s.Qb(),s.Rb(3,"mat-icon"),s.Ac(4,"open_in_new"),s.Qb(),s.Qb())}function ot(e,t){if(1&e&&(s.Rb(0,"div",31),s.Rb(1,"mat-icon",32),s.Ac(2,"error_outline"),s.Qb(),s.Qb(),s.Rb(3,"p",33),s.Vb(4,34),s.Qb(),s.Rb(5,"p"),s.Vb(6,35),s.Qb(),s.Rb(7,"div",19),s.yc(8,tt,1,0,"mat-progress-bar",20),s.Mb(9,"span",21),s.yc(10,rt,5,0,"button",36),s.Qb()),2&e){const e=s.fc();s.Bb(8),s.kc("ngIf",e.isFormSubmitted),s.Bb(2),s.kc("ngIf",!e.isFormSubmitted)}}function at(e,t){1&e&&(s.Rb(0,"div",31),s.Rb(1,"mat-icon",32),s.Ac(2,"done"),s.Qb(),s.Qb(),s.Rb(3,"p",33),s.Vb(4,39),s.Qb(),s.Rb(5,"div",19),s.Mb(6,"span",40),s.Rb(7,"button",41),s.Rb(8,"span"),s.Vb(9,42),s.Qb(),s.Rb(10,"mat-icon"),s.Ac(11,"open_in_new"),s.Qb(),s.Qb(),s.Qb())}const it=[{path:"",component:he,canActivate:[l]},{path:"confirm-email",component:Ce,canActivate:[b]},{path:"confirm-email/:token",component:Ce,canActivate:[b]},{path:"forgot-password",component:(()=>{class e{constructor(e,t,r,o,a){this.formBuilder=e,this.authService=t,this.router=r,this.snackbarService=o,this.dialog=a,this.isLoading=!1,this.isPasswordHidden=!0,this.errorMessage="",this.isDestroyed$=new P.a,this.formGroup=this.createFormGroup("change")}get f(){return this.formGroup.controls}ngOnInit(){}ngOnDestroy(){this.isDestroyed$.next(!0),this.isDestroyed$.complete()}onSubmit(){var e;return this.isLoading=!0,this.formGroup.disable(),this.authService.forgotPassword$(null===(e=this.f.email)||void 0===e?void 0:e.value).pipe(Object(g.a)(e=>this.dialog.open(Me).afterClosed()),Object(O.a)(this.isDestroyed$)).subscribe(e=>this.router.navigate(["/auth"]),e=>{var t;this.errorMessage=null===(t=e)||void 0===t?void 0:t.message,this.isLoading=!1,this.formGroup.enable()})}createFormGroup(e){return this.formBuilder.group({email:[null,[$.m.required,$.m.email]]},{updateOn:e,validators:this.mustNotBeRejectedValidator()})}mustNotBeRejectedValidator(){return()=>{this.errorMessage===v.EmailNotFound?this.f.email.setErrors({mustNotBeRejected:!0}):""!==this.errorMessage&&this.snackbarService.open(this.errorMessage,"warn"),this.errorMessage=""}}}return e.\u0275fac=function(t){return new(t||e)(s.Lb($.b),s.Lb(S),s.Lb(a.b),s.Lb(M),s.Lb(J.a))},e.\u0275cmp=s.Fb({type:e,selectors:[["app-forgot-password"]],decls:19,vars:7,consts:function(){let e,t,r,o,a,i,n,s;return e="Forgot password",t="Enter your email address to receive instructions on how to change your password.",r="Email address",o="You must fill in this field",a="Not a valid email",i="Please check your email address",n="Sign in",s="Submit",[[1,"centred","anime-zoom-in"],[1,"card-alone"],e,[1,"pt-10"],t,[3,"formGroup","ngSubmit"],["appearance","outline","color","accent",1,"form-field"],r,["matInput","","formControlName","email","color","primary","type","email","autocomplete","email","required",""],[4,"ngIf"],[1,"button-group"],["class","mt-20","mode","indeterminate","color","accent",4,"ngIf"],["type","button","mat-button","","color","accent","routerLink","/auth",4,"ngIf"],["mat-raised-button","","class","icon-after rounded","color","accent","type","submit",3,"disabled",4,"ngIf"],o,a,i,["mode","indeterminate","color","accent",1,"mt-20"],["type","button","mat-button","","color","accent","routerLink","/auth"],n,["mat-raised-button","","color","accent","type","submit",1,"icon-after","rounded",3,"disabled"],s]},template:function(e,t){1&e&&(s.Rb(0,"section",0),s.Rb(1,"mat-card",1),s.Rb(2,"mat-card-title"),s.Vb(3,2),s.Qb(),s.Rb(4,"p",3),s.Vb(5,4),s.Qb(),s.Rb(6,"mat-card-content"),s.Rb(7,"form",5),s.bc("ngSubmit",function(){return t.onSubmit()}),s.Rb(8,"mat-form-field",6),s.Rb(9,"mat-label"),s.Vb(10,7),s.Qb(),s.Mb(11,"input",8),s.yc(12,Ne,2,0,"mat-error",9),s.yc(13,Ve,2,0,"mat-error",9),s.yc(14,Le,2,0,"mat-error",9),s.Qb(),s.Rb(15,"div",10),s.yc(16,Ee,1,0,"mat-progress-bar",11),s.yc(17,Ae,2,0,"button",12),s.yc(18,De,5,1,"button",13),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb()),2&e&&(s.Bb(7),s.kc("formGroup",t.formGroup),s.Bb(5),s.kc("ngIf",null==t.f.email||null==t.f.email.errors?null:t.f.email.errors.required),s.Bb(1),s.kc("ngIf",null==t.f.email||null==t.f.email.errors?null:t.f.email.errors.email),s.Bb(1),s.kc("ngIf",null==t.f.email||null==t.f.email.errors?null:t.f.email.errors.mustNotBeRejected),s.Bb(2),s.kc("ngIf",t.isLoading),s.Bb(1),s.kc("ngIf",!t.isLoading),s.Bb(1),s.kc("ngIf",!t.isLoading))},directives:[Q.a,Q.d,Q.b,$.n,$.i,$.d,N.c,N.f,V.a,$.a,$.h,$.c,$.l,o.k,N.b,A.a,L.b,a.c,E.a],styles:[".form-field[_ngcontent-%COMP%]{width:100%}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"],changeDetection:0}),e})(),canActivate:[l]},{path:"reset-password/:id/:token",component:(()=>{class e{constructor(e,t,r,o,a){this.formBuilder=e,this.authService=t,this.snackbarService=r,this.changeDetectorRef=o,this.activatedRoute=a,this.isFormSubmitted=!1,this.isResetPasswordSucceed=!1,this.isResetPasswordFailed=!1,this.accountId=0,this.token="",this.isPasswordHidden=!0,this.errorMessage="",this.isDestroyed$=new P.a,this.formGroup=this.createFormGroup("change")}get f(){return this.formGroup.controls}ngOnInit(){var e,t;return Object(f.a)(this,void 0,void 0,function*(){const r=null!==(e=this.activatedRoute.snapshot.paramMap.get("id"))&&void 0!==e?e:"";this.accountId=""!==r?parseInt(r,10):0,this.token=null!==(t=this.activatedRoute.snapshot.paramMap.get("token"))&&void 0!==t?t:""})}ngOnDestroy(){this.isDestroyed$.next(!0),this.isDestroyed$.complete()}onSubmit(){var e;return this.isFormSubmitted=!0,this.formGroup.disable(),this.isPasswordHidden=!0,this.authService.resetPassword$({newPassword:null===(e=this.f.password)||void 0===e?void 0:e.value},this.accountId,this.token).pipe(Object(ge.a)(()=>{this.isFormSubmitted=!1,this.changeDetectorRef.detectChanges()}),Object(O.a)(this.isDestroyed$)).subscribe(e=>this.isResetPasswordSucceed=!0,e=>{var t;this.errorMessage=null===(t=e)||void 0===t?void 0:t.message,this.errorMessage===v.NewPasswordMustBeDifferentFromCurrent?(this.isFormSubmitted=!1,this.formGroup.enable(),this.f.password.setErrors({mustNotBeRejected:!0}),this.errorMessage=""):this.isResetPasswordFailed=!0})}createFormGroup(e,t){const r=this.formBuilder.group({password:[null,[$.m.required,$.m.pattern(/^.{8,191}$/)]],confirmPassword:[null,[$.m.required]]},{updateOn:e,validators:[W("password","confirmPassword"),this.mustNotBeRejectedValidator()]});return void 0!==t&&r.setValue(t),r}mustNotBeRejectedValidator(){return()=>{""!==this.errorMessage&&this.snackbarService.open(this.errorMessage,"warn"),this.errorMessage=""}}}return e.\u0275fac=function(t){return new(t||e)(s.Lb($.b),s.Lb(S),s.Lb(M),s.Lb(s.h),s.Lb(a.a))},e.\u0275cmp=s.Fb({type:e,selectors:[["app-reset-password"]],decls:13,vars:3,consts:function(){let e,t,r,o,a,i,n,s,c,l,b,d,u,f,m,p;return e="Set your new password",t="Password",r="Toggle password visibility",o="Confirm password",a="Toggle password visibility",i="You must fill in this field",n="Must contain 8+ characters",s="New password must be different from current",c="Passwords doesn't match",l="You must confirm the password",b="Submit",d="Could not reset your password.",u="You can request a new verification link if the old one has expired.",f="Forgot password",m="You have just changed your password, you can now authenticate yourself.",p="Sign in",[[1,"centred"],[1,"p-20","auth-card"],[4,"ngIf"],["loadingTemplate",""],["setNewPasswordTemplate",""],["resetPasswordFailedTemplate",""],["resetPasswordSuccessTemplate",""],[4,"ngTemplateOutlet"],["color","accent"],e,[1,"pt-10"],[3,"formGroup","ngSubmit"],["appearance","outline","color","accent",1,"form-field"],["matInput","","formControlName","password","autocomplete","new-password","required","",3,"type"],t,["type","button","mat-icon-button","","matSuffix","","aria-label",r,3,"click"],["matInput","","formControlName","confirmPassword","required","",3,"type"],o,["type","button","mat-icon-button","","matSuffix","","aria-label",a,3,"click"],[1,"button-group"],["mode","indeterminate","color","accent",4,"ngIf"],[1,"fill-remaining-space"],["mat-raised-button","","class","icon-after rounded","color","accent","type","submit",3,"disabled",4,"ngIf"],i,n,s,c,l,["mode","indeterminate","color","accent"],["mat-raised-button","","color","accent","type","submit",1,"icon-after","rounded",3,"disabled"],b,[1,"center"],[1,"status-icon"],[1,"center","py-10"],d,u,["mat-raised-button","","class","icon-after rounded","color","accent","routerLink","/auth/forgot-password",4,"ngIf"],["mat-raised-button","","color","accent","routerLink","/auth/forgot-password",1,"icon-after","rounded"],f,m,[1,"fill-remain-space"],["mat-raised-button","","color","accent","routerLink","/auth",1,"icon-after","rounded"],p]},template:function(e,t){1&e&&(s.Rb(0,"section",0),s.Rb(1,"mat-card",1),s.yc(2,Ge,2,1,"ng-container",2),s.yc(3,qe,2,1,"ng-container",2),s.yc(4,Te,2,1,"ng-container",2),s.Qb(),s.Qb(),s.yc(5,Ye,1,0,"ng-template",null,3,s.zc),s.yc(7,et,27,16,"ng-template",null,4,s.zc),s.yc(9,ot,11,2,"ng-template",null,5,s.zc),s.yc(11,at,12,0,"ng-template",null,6,s.zc)),2&e&&(s.Bb(2),s.kc("ngIf",!t.isResetPasswordFailed&&!t.isResetPasswordSucceed),s.Bb(1),s.kc("ngIf",t.isResetPasswordSucceed),s.Bb(1),s.kc("ngIf",t.isResetPasswordFailed))},directives:[Q.a,o.k,o.o,we.b,Q.d,Q.b,$.n,$.i,$.d,N.c,V.a,$.a,$.h,$.c,$.l,N.f,L.b,N.g,E.a,N.b,A.a,a.c],styles:[".auth-card[_ngcontent-%COMP%]{max-width:400px}.status-icon[_ngcontent-%COMP%]{font-size:75px;height:75px;width:75px}.form-field[_ngcontent-%COMP%]{width:100%}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"],changeDetection:0}),e})()}];let nt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.Jb({type:e}),e.\u0275inj=s.Ib({imports:[[o.c,a.f.forChild(it),d.a]]}),e})()}}]);