(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{Yj9t:function(e,t,r){"use strict";r.r(t),r.d(t,"AuthModule",function(){return nt});var i=r("SVse"),o=r("iInd"),a=r("lJxs"),n=r("oQ8E"),s=r("8Y7J"),c=r("f4AX");let d=(()=>{class e{constructor(e,t,r){this.logService=e,this.router=t,this.userService=r}canActivate(){return this.userService.account$.pipe(Object(a.a)(e=>void 0===e||(this.logService.info(n.b.Guard,this.constructor.name),this.router.parseUrl("/"))))}}return e.\u0275fac=function(t){return new(t||e)(s.Wb(n.a),s.Wb(o.b),s.Wb(c.a))},e.\u0275prov=s.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),l=(()=>{class e{constructor(e,t,r){this.logService=e,this.router=t,this.userService=r}canActivate(){const e=this.userService.jwt;return this.userService.account$.pipe(Object(a.a)(t=>void 0!==e&&void 0!==t||(this.logService.info(n.b.Guard,this.constructor.name),this.router.parseUrl("/auth"))))}}return e.\u0275fac=function(t){return new(t||e)(s.Wb(n.a),s.Wb(o.b),s.Wb(c.a))},e.\u0275prov=s.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var b=r("PCNd"),u=r("AytR"),f=r("mrSG"),m=r("LRne"),p=r("z6cu"),h=r("3E0/"),g=r("eIep"),P=function(e){return e.Admin="admin",e.Ghost="ghost",e}({}),w=function(e){return e.InvalidEmail="Invalid email",e.InvalidPassword="Invalid password",e.EmailExists="Email already exists",e.EmailConfirmed="Email already confirmed",e.EmailNotFound="Email not found",e.InvalidToken="Invalid token",e.NewPasswordMustBeDifferentFromCurrent="New password must be different from current",e}({});const O={id:42,email:"johndoe@email.com",password:"JohnDoePass123",firstName:"John",lastName:"Doe",isConfirmed:!0,createdAt:new Date("September 22, 2018 15:00:00"),updatedAt:new Date("October 12, 2020 19:00:00"),roles:[P.Ghost]},v="johndoe.test.token",y=1e3;var z=r("PDjf"),I=r("M9ds"),$=r("s7LF"),j=r("XNiG"),T=r("1G5W"),k=r("vkgz"),S=r("IzEk"),C=r("IheW");let N=(()=>{class e{constructor(e,t){this.userService=e,this.http=t,this.isUsableWithoutApi=""===u.a.apiUrl}login$(e){return this.isUsableWithoutApi?(e=>{if(e.email.toLowerCase()!==O.email)return Object(m.a)(void 0).pipe(Object(h.a)(y),Object(g.a)(()=>Object(p.a)(new Error("Invalid email"))));if(e.password!==O.password)return Object(m.a)(void 0).pipe(Object(h.a)(y),Object(g.a)(()=>Object(p.a)(new Error("Invalid password"))));const t=Object(f.b)(O,["password"]);return Object(m.a)({jwt:"ey...",account:t}).pipe(Object(h.a)(y))})(e).pipe(Object(k.a)(e=>this.userService.update(e.account,e.jwt))):this.http.post(u.a.apiUrl+"/auth/login",e).pipe(Object(k.a)(e=>this.userService.update(e.account,e.jwt)))}register$(e){return this.isUsableWithoutApi?(e=>e.email.toLowerCase()===O.email?Object(m.a)(void 0).pipe(Object(h.a)(y),Object(g.a)(()=>Object(p.a)(new Error("Email already exists")))):Object(m.a)({jwt:"ey...",account:{id:43,createdAt:new Date,updatedAt:new Date,firstName:e.firstName,lastName:e.lastName,email:e.email,isConfirmed:!1}}).pipe(Object(h.a)(y)))(e).pipe(Object(k.a)(e=>this.userService.update(e.account,e.jwt))):this.http.post(u.a.apiUrl+"/auth/register",e).pipe(Object(k.a)(e=>this.userService.update(e.account,e.jwt)))}resendConfirmationEmail$(e){return this.isUsableWithoutApi?Object(m.a)({isSuccess:!0}).pipe(Object(h.a)(2e3)):this.http.get(`${u.a.apiUrl}/auth/resend-confirmation-email/${e}`)}confirmEmail$(e){return this.isUsableWithoutApi?this.userService.account$.pipe(Object(S.a)(1),Object(g.a)(t=>((e,t)=>{if(void 0===e)return Object(p.a)(new Error(w.EmailConfirmed));if(e.isConfirmed)return Object(p.a)(new Error(w.EmailConfirmed));if(t!==v)return Object(m.a)(void 0).pipe(Object(h.a)(y),Object(g.a)(()=>Object(p.a)(new Error(w.InvalidToken))));const r=Object.assign(Object.assign({},O),{isConfirmed:!0});return Object(m.a)({jwt:"ey...",account:r}).pipe(Object(h.a)(y))})(t,e)),Object(k.a)(e=>{this.userService.update(e.account,e.jwt)})):this.http.get(`${u.a.apiUrl}/auth/confirm-email/${e}`).pipe(Object(k.a)(e=>this.userService.update(e.account,e.jwt)))}forgotPassword$(e){const t=e.toLowerCase();return this.isUsableWithoutApi?Object(m.a)({isProcessed:!0}).pipe(Object(h.a)(y)):this.http.get(`${u.a.apiUrl}/auth/forgot-password/${t}`)}resetPassword$(e,t,r){return this.isUsableWithoutApi?((e,t,r)=>t===O.id&&r===v?Object(m.a)({isProcessed:!0}).pipe(Object(h.a)(y)):Object(m.a)(void 0).pipe(Object(h.a)(y),Object(g.a)(()=>Object(p.a)(new Error(w.InvalidToken)))))(0,t,r):this.http.post(`${u.a.apiUrl}/auth/reset-password/${t}/${r}`,e)}}return e.\u0275fac=function(t){return new(t||e)(s.Wb(c.a),s.Wb(C.b))},e.\u0275prov=s.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var D=r("zHaW");let M=(()=>{class e{constructor(e){this.snackBar=e,this.horizontalPosition="center",this.verticalPosition="top"}open(e,t){return this.snackBar.open(e,void 0,{duration:3e3,horizontalPosition:this.horizontalPosition,verticalPosition:this.verticalPosition,panelClass:["mat-toolbar","mat-"+t]})}}return e.\u0275fac=function(t){return new(t||e)(s.Wb(D.a))},e.\u0275prov=s.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var A=r("Q2Ze"),E=r("e6WT"),R=r("Dxy4"),H=r("Tj54"),G=r("BTe0");function x(e,t){1&e&&(s.Pb(0,"mat-error"),s.Tb(1,12),s.Ob())}function L(e,t){1&e&&(s.Pb(0,"mat-error"),s.Tb(1,13),s.Ob())}function q(e,t){1&e&&(s.Pb(0,"mat-error"),s.Tb(1,14),s.Ob())}function J(e,t){if(1&e){const e=s.Qb();s.Pb(0,"button",15),s.Zb("click",function(){s.qc(e);const t=s.dc();return t.isPasswordHidden=!t.isPasswordHidden}),s.Pb(1,"mat-icon"),s.Ac(2),s.Ob(),s.Ob()}if(2&e){const e=s.dc();s.zb(2),s.Bc(e.isPasswordHidden?"visibility_off":"visibility")}}function B(e,t){1&e&&(s.Pb(0,"mat-error"),s.Tb(1,16),s.Ob())}function F(e,t){1&e&&(s.Pb(0,"mat-error"),s.Tb(1,17),s.Ob())}function K(e,t){1&e&&s.Kb(0,"mat-progress-bar",18)}function U(e,t){1&e&&(s.Pb(0,"button",19),s.Tb(1,20),s.Ob())}function _(e,t){if(1&e&&(s.Pb(0,"button",21),s.Pb(1,"span"),s.Tb(2,22),s.Ob(),s.Pb(3,"mat-icon"),s.Ac(4,"send"),s.Ob(),s.Ob()),2&e){const e=s.dc();s.ic("disabled",!e.formGroup.valid)}}let W=(()=>{class e{constructor(e,t,r,i){this.formBuilder=e,this.authService=t,this.router=r,this.snackbarService=i,this.errorHappens=new s.n,this.isLoading=!1,this.isPasswordHidden=!0,this.errorMessage="",this.isDestroyed$=new j.a,this.formGroup=this.createFormGroup("change")}get f(){return this.formGroup.controls}ngOnInit(){}ngOnDestroy(){this.isDestroyed$.next(!0),this.isDestroyed$.complete()}onSubmit(){var e,t;return this.isLoading=!0,this.formGroup.disable(),this.isPasswordHidden=!0,this.authService.login$({email:null===(e=this.f.identifier)||void 0===e?void 0:e.value,password:null===(t=this.f.password)||void 0===t?void 0:t.value}).pipe(Object(T.a)(this.isDestroyed$)).subscribe(e=>this.router.navigate(["/"]),e=>{this.errorHappens.emit(e.message),this.errorMessage=e.message,this.isLoading=!1,this.formGroup.enable()})}createFormGroup(e,t){const r=this.formBuilder.group({identifier:[void 0,[$.m.required,$.m.email]],password:[void 0,[$.m.required]]},{updateOn:e,validators:this.mustNotBeRejectedValidator()});return void 0!==t&&r.setValue(t),r}mustNotBeRejectedValidator(){return()=>{this.errorMessage===w.InvalidEmail?this.f.identifier.setErrors({mustNotBeRejected:!0}):this.errorMessage===w.InvalidPassword?this.f.password.setErrors({mustNotBeRejected:!0}):""!==this.errorMessage&&this.snackbarService.open(this.errorMessage,"warn"),this.errorMessage=""}}}return e.\u0275fac=function(t){return new(t||e)(s.Jb($.b),s.Jb(N),s.Jb(o.b),s.Jb(M))},e.\u0275cmp=s.Db({type:e,selectors:[["app-login-form"]],outputs:{errorHappens:"errorHappens"},decls:19,vars:11,consts:function(){let e,t,r,i,o,a,n,s,c,d,l;return e="Email address",t="Password",r="Toggle password visibility",i="You must fill in this field",o="Please check your identifier",a="Not a valid email",n="Toggle password visibility",s="You must fill in this field",c="Please check your password",d="Forgot password",l="Submit",[[3,"formGroup","ngSubmit"],["appearance","outline","color","accent",1,"form-field"],e,["matInput","","formControlName","identifier","autocomplete","email","type","email"],[4,"ngIf"],["matInput","","formControlName","password","id","current-password","autocomplete","current-password",3,"type"],t,["type","button","mat-icon-button","","matSuffix","","aria-label",r,3,"click",4,"ngIf"],[1,"button-group","mt-20"],["mode","indeterminate","color","accent",4,"ngIf"],["type","button","mat-button","","color","accent","routerLink","/auth/forgot-password",4,"ngIf"],["mat-raised-button","","class","icon-after rounded","color","accent","type","submit",3,"disabled",4,"ngIf"],i,o,a,["type","button","mat-icon-button","","matSuffix","","aria-label",n,3,"click"],s,c,["mode","indeterminate","color","accent"],["type","button","mat-button","","color","accent","routerLink","/auth/forgot-password"],d,["mat-raised-button","","color","accent","type","submit",1,"icon-after","rounded",3,"disabled"],l]},template:function(e,t){1&e&&(s.Pb(0,"form",0),s.Zb("ngSubmit",function(){return t.onSubmit()}),s.Pb(1,"mat-form-field",1),s.Pb(2,"mat-label"),s.Tb(3,2),s.Ob(),s.Kb(4,"input",3),s.yc(5,x,2,0,"mat-error",4),s.yc(6,L,2,0,"mat-error",4),s.yc(7,q,2,0,"mat-error",4),s.Ob(),s.Pb(8,"mat-form-field",1),s.Kb(9,"input",5),s.Pb(10,"mat-label"),s.Tb(11,6),s.Ob(),s.yc(12,J,3,1,"button",7),s.yc(13,B,2,0,"mat-error",4),s.yc(14,F,2,0,"mat-error",4),s.Ob(),s.Pb(15,"div",8),s.yc(16,K,1,0,"mat-progress-bar",9),s.yc(17,U,2,0,"button",10),s.yc(18,_,5,1,"button",11),s.Ob(),s.Ob()),2&e&&(s.ic("formGroup",t.formGroup),s.zb(5),s.ic("ngIf",null==t.f.identifier||null==t.f.identifier.errors?null:t.f.identifier.errors.required),s.zb(1),s.ic("ngIf",null==t.f.identifier||null==t.f.identifier.errors?null:t.f.identifier.errors.mustNotBeRejected),s.zb(1),s.ic("ngIf",null==t.f.identifier||null==t.f.identifier.errors?null:t.f.identifier.errors.email),s.zb(2),s.ic("type",t.isPasswordHidden?"password":"text"),s.zb(3),s.ic("ngIf",!t.isLoading),s.zb(1),s.ic("ngIf",null==t.f.password||null==t.f.password.errors?null:t.f.password.errors.required),s.zb(1),s.ic("ngIf",null==t.f.password||null==t.f.password.errors?null:t.f.password.errors.mustNotBeRejected),s.zb(2),s.ic("ngIf",t.isLoading),s.zb(1),s.ic("ngIf",!t.isLoading),s.zb(1),s.ic("ngIf",!t.isLoading))},directives:[$.n,$.i,$.d,A.c,A.f,E.a,$.a,$.h,$.c,i.k,A.b,R.b,A.g,H.a,G.a,o.c],styles:[".form-field[_ngcontent-%COMP%]{width:100%}.button-group[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between}"],changeDetection:0}),e})();function Y(e,t){return r=>{const i=r.controls[t];(null===i.errors||i.errors.mustMatch)&&i.setErrors(r.controls[e].value!==i.value?{mustMatch:!0}:null)}}var Z=r("iELJ");let V=(()=>{class e{constructor(e){this.dialogRef=e}ngOnInit(){}onClose(){this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(s.Jb(Z.e))},e.\u0275cmp=s.Db({type:e,selectors:[["app-confirm-email-dialog"]],decls:8,vars:0,consts:function(){let e,t,r;return e="Check your mailbox",t="A confirmation email has been sent, please check your inbox and follow the link in the email to confirm your registration.",r="Ok",[["matDialogTitle",""],e,t,["mat-dialog-actions",""],["mat-raised-button","","color","accent",1,"rounded",3,"click"],r]},template:function(e,t){1&e&&(s.Pb(0,"h2",0),s.Tb(1,1),s.Ob(),s.Pb(2,"mat-dialog-content"),s.Pb(3,"p"),s.Tb(4,2),s.Ob(),s.Ob(),s.Pb(5,"div",3),s.Pb(6,"button",4),s.Zb("click",function(){return t.onClose()}),s.Tb(7,5),s.Ob(),s.Ob())},directives:[Z.f,Z.c,Z.b,R.b],styles:[""],changeDetection:0}),e})();function Q(e,t){1&e&&(s.Pb(0,"mat-error"),s.Tb(1,19),s.Ob())}function X(e,t){1&e&&(s.Pb(0,"mat-error"),s.Tb(1,20),s.Ob())}function ee(e,t){1&e&&(s.Pb(0,"mat-error"),s.Tb(1,21),s.Ob())}function te(e,t){1&e&&(s.Pb(0,"mat-error"),s.Tb(1,22),s.Ob())}function re(e,t){1&e&&(s.Pb(0,"mat-error"),s.Tb(1,23),s.Ob())}function ie(e,t){1&e&&(s.Pb(0,"mat-error"),s.Tb(1,24),s.Ob())}function oe(e,t){1&e&&(s.Pb(0,"mat-error"),s.Tb(1,25),s.Ob())}function ae(e,t){1&e&&(s.Pb(0,"mat-error"),s.Tb(1,26),s.Ob())}function ne(e,t){1&e&&(s.Pb(0,"mat-error"),s.Tb(1,27),s.Ob())}function se(e,t){1&e&&(s.Pb(0,"mat-error"),s.Tb(1,28),s.Ob())}function ce(e,t){1&e&&(s.Pb(0,"mat-error"),s.Tb(1,29),s.Ob())}function de(e,t){1&e&&s.Kb(0,"mat-progress-bar",30)}function le(e,t){if(1&e&&(s.Pb(0,"button",31),s.Pb(1,"span"),s.Tb(2,32),s.Ob(),s.Pb(3,"mat-icon"),s.Ac(4,"send"),s.Ob(),s.Ob()),2&e){const e=s.dc();s.ic("disabled",!e.formGroup.valid)}}let be=(()=>{class e{constructor(e,t,r,i,o){this.formBuilder=e,this.authService=t,this.router=r,this.snackbarService=i,this.dialog=o,this.errorHappens=new s.n,this.isLoading=!1,this.isPasswordHidden=!0,this.errorMessage="",this.isDestroyed$=new j.a,this.formGroup=this.createFormGroup("change")}get f(){return this.formGroup.controls}ngOnInit(){}ngOnDestroy(){this.isDestroyed$.next(!0),this.isDestroyed$.complete()}onSubmit(){var e,t,r,i;return this.isLoading=!0,this.formGroup.disable(),this.isPasswordHidden=!0,this.authService.register$({firstName:null===(e=this.f.firstName)||void 0===e?void 0:e.value,lastName:null===(t=this.f.lastName)||void 0===t?void 0:t.value,email:null===(r=this.f.email)||void 0===r?void 0:r.value,password:null===(i=this.f.password)||void 0===i?void 0:i.value}).pipe(Object(g.a)(e=>this.dialog.open(V).afterClosed()),Object(T.a)(this.isDestroyed$)).subscribe(e=>this.router.navigate(["/"]),e=>{this.errorHappens.emit(e.message),this.errorMessage=e.message,this.isLoading=!1,this.formGroup.enable()})}onCloseDialog(){return this.dialog.closeAll(),this.router.navigate(["home"])}createFormGroup(e,t){const r=this.formBuilder.group({firstName:[null,[$.m.required]],lastName:[null,[$.m.required]],email:[null,[$.m.required,$.m.email]],password:[null,[$.m.required,$.m.pattern(/^.{8,255}$/)]],confirmPassword:[null,[$.m.required]]},{updateOn:e,validators:[Y("password","confirmPassword"),this.mustNotBeRejectedValidator()]});return void 0!==t&&r.setValue(t),r}mustNotBeRejectedValidator(){return e=>{this.errorMessage===w.EmailExists?e.controls.email.setErrors({mustNotBeRejected:!0}):""!==this.errorMessage&&this.snackbarService.open(this.errorMessage,"warn"),this.errorMessage=""}}}return e.\u0275fac=function(t){return new(t||e)(s.Jb($.b),s.Jb(N),s.Jb(o.b),s.Jb(M),s.Jb(Z.a))},e.\u0275cmp=s.Db({type:e,selectors:[["app-register-form"]],outputs:{errorHappens:"errorHappens"},decls:42,vars:22,consts:function(){let e,t,r,i,o,a,n,s,c,d,l,b,u,f,m,p,h,g,P;return e="First name",t="Last name",r="Email address",i="Password",o="Toggle password visibility",a="Confirm password",n="Toggle password visibility",s="You must fill in this field",c="Must contain 2-50 alphanumeric characters",d="You must fill in this field",l="Must contain 2-50 alphanumeric characters",b="You must fill in this field",u="Not a valid email",f="Email is already taken",m="You must fill in this field",p="Must contain 8+ characters",h="Passwords doesn't match",g="You must fill in this field ",P="Submit",[[3,"formGroup","ngSubmit"],["appearance","outline","color","accent",1,"form-field"],e,["matInput","","formControlName","firstName","color","primary","autocomplete","given-name","required",""],[4,"ngIf"],t,["matInput","","formControlName","lastName","color","primary","autocomplete","family-name","required",""],r,["matInput","","formControlName","email","color","primary","autocomplete","email","type","email","required",""],["matInput","","formControlName","password","id","new-password","autocomplete","new-password","required","",3,"type"],i,["type","button","mat-icon-button","","matSuffix","","aria-label",o,3,"click"],["matInput","","formControlName","confirmPassword","required","",3,"type"],a,["type","button","mat-icon-button","","matSuffix","","aria-label",n,3,"click"],[1,"button-group","mt-20"],["mode","indeterminate","color","accent",4,"ngIf"],[1,"fill-remaining-space"],["mat-raised-button","","class","icon-after rounded","color","accent","type","submit",3,"disabled",4,"ngIf"],s,c,d,l,b,u,f,m,p,h,g,["mode","indeterminate","color","accent"],["mat-raised-button","","color","accent","type","submit",1,"icon-after","rounded",3,"disabled"],P]},template:function(e,t){1&e&&(s.Pb(0,"form",0),s.Zb("ngSubmit",function(){return t.onSubmit()}),s.Pb(1,"mat-form-field",1),s.Pb(2,"mat-label"),s.Tb(3,2),s.Ob(),s.Kb(4,"input",3),s.yc(5,Q,2,0,"mat-error",4),s.yc(6,X,2,0,"mat-error",4),s.Ob(),s.Pb(7,"mat-form-field",1),s.Pb(8,"mat-label"),s.Tb(9,5),s.Ob(),s.Kb(10,"input",6),s.yc(11,ee,2,0,"mat-error",4),s.yc(12,te,2,0,"mat-error",4),s.Ob(),s.Pb(13,"mat-form-field",1),s.Pb(14,"mat-label"),s.Tb(15,7),s.Ob(),s.Kb(16,"input",8),s.yc(17,re,2,0,"mat-error",4),s.yc(18,ie,2,0,"mat-error",4),s.yc(19,oe,2,0,"mat-error",4),s.Ob(),s.Pb(20,"mat-form-field",1),s.Kb(21,"input",9),s.Pb(22,"mat-label"),s.Tb(23,10),s.Ob(),s.Pb(24,"button",11),s.Zb("click",function(){return t.isPasswordHidden=!t.isPasswordHidden}),s.Pb(25,"mat-icon"),s.Ac(26),s.Ob(),s.Ob(),s.yc(27,ae,2,0,"mat-error",4),s.yc(28,ne,2,0,"mat-error",4),s.Ob(),s.Pb(29,"mat-form-field",1),s.Kb(30,"input",12),s.Pb(31,"mat-label"),s.Tb(32,13),s.Ob(),s.Pb(33,"button",14),s.Zb("click",function(){return t.isPasswordHidden=!t.isPasswordHidden}),s.Pb(34,"mat-icon"),s.Ac(35),s.Ob(),s.Ob(),s.yc(36,se,2,0,"mat-error",4),s.yc(37,ce,2,0,"mat-error",4),s.Ob(),s.Pb(38,"div",15),s.yc(39,de,1,0,"mat-progress-bar",16),s.Kb(40,"span",17),s.yc(41,le,5,1,"button",18),s.Ob(),s.Ob()),2&e&&(s.ic("formGroup",t.formGroup),s.zb(5),s.ic("ngIf",null==t.f.firstName||null==t.f.firstName.errors?null:t.f.firstName.errors.required),s.zb(1),s.ic("ngIf",null==t.f.firstName||null==t.f.firstName.errors?null:t.f.firstName.errors.pattern),s.zb(5),s.ic("ngIf",null==t.f.lastName||null==t.f.lastName.errors?null:t.f.lastName.errors.required),s.zb(1),s.ic("ngIf",null==t.f.lastName||null==t.f.lastName.errors?null:t.f.lastName.errors.pattern),s.zb(5),s.ic("ngIf",null==t.f.email||null==t.f.email.errors?null:t.f.email.errors.required),s.zb(1),s.ic("ngIf",null==t.f.email||null==t.f.email.errors?null:t.f.email.errors.email),s.zb(1),s.ic("ngIf",null==t.f.email||null==t.f.email.errors?null:t.f.email.errors.mustNotBeRejected),s.zb(2),s.ic("type",t.isPasswordHidden?"password":"text"),s.zb(3),s.Ab("aria-label","isPasswordHidden password")("aria-pressed",t.isPasswordHidden),s.zb(2),s.Bc(t.isPasswordHidden?"visibility_off":"visibility"),s.zb(1),s.ic("ngIf",null==t.f.password||null==t.f.password.errors?null:t.f.password.errors.required),s.zb(1),s.ic("ngIf",null==t.f.password||null==t.f.password.errors?null:t.f.password.errors.pattern),s.zb(2),s.ic("type",t.isPasswordHidden?"password":"text"),s.zb(3),s.Ab("aria-label","isPasswordHidden password")("aria-pressed",t.isPasswordHidden),s.zb(2),s.Cc(" ",t.isPasswordHidden?"visibility_off":"visibility"," "),s.zb(1),s.ic("ngIf",null==t.f.confirmPassword||null==t.f.confirmPassword.errors?null:t.f.confirmPassword.errors.mustMatch),s.zb(1),s.ic("ngIf",null==t.f.confirmPassword||null==t.f.confirmPassword.errors?null:t.f.confirmPassword.errors.required),s.zb(2),s.ic("ngIf",t.isLoading),s.zb(2),s.ic("ngIf",!t.isLoading))},directives:[$.n,$.i,$.d,A.c,A.f,E.a,$.a,$.h,$.c,$.l,i.k,R.b,A.g,H.a,A.b,G.a],styles:[".form-field[_ngcontent-%COMP%]{width:100%}.button-group[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between}"],changeDetection:0}),e})();function ue(e,t){if(1&e){const e=s.Qb();s.Pb(0,"mat-card-content",7),s.Pb(1,"app-login-form",8),s.Zb("errorHappens",function(t){return s.qc(e),s.dc().onErrorHappens(t)}),s.Ob(),s.Ob()}}function fe(e,t){if(1&e){const e=s.Qb();s.Pb(0,"mat-card-content",7),s.Pb(1,"app-register-form",8),s.Zb("errorHappens",function(t){return s.qc(e),s.dc().onErrorHappens(t)}),s.Ob(),s.Ob()}}function me(e,t){if(1&e&&(s.Pb(0,"p",9),s.Pb(1,"b"),s.Ac(2,"Test:"),s.Ob(),s.Ac(3),s.Ob()),2&e){const e=s.dc();s.zb(3),s.Dc(" ",null==e.mockUser?null:e.mockUser.email," / ",null==e.mockUser?null:e.mockUser.password,"")}}const pe=function(e){return{"anime-wobble":e}};let he=(()=>{class e{constructor(e){this.changeDetectorRef=e,this.errorMessage="",this.isUsableWithoutApi=""===u.a.apiUrl,this.mockUser=O}ngOnInit(){}onErrorHappens(e){this.errorMessage=e,this.changeDetectorRef.detectChanges(),setTimeout(()=>{this.errorMessage=""},500)}}return e.\u0275fac=function(t){return new(t||e)(s.Jb(s.h))},e.\u0275cmp=s.Db({type:e,selectors:[["app-auth"]],decls:8,vars:4,consts:function(){let e,t;return e="Log in",t="Register",[[1,"centred","anime-zoom-in"],[1,"p-0","card-alone",3,"ngClass"],["mat-stretch-tabs","","animationDuration","0ms","color","accent"],["label",e],["matTabContent",""],["label",t],["style","margin: 10px;",4,"ngIf"],[1,"m-0","p-16"],[3,"errorHappens"],[2,"margin","10px"]]},template:function(e,t){1&e&&(s.Pb(0,"section",0),s.Pb(1,"mat-card",1),s.Pb(2,"mat-tab-group",2),s.Pb(3,"mat-tab",3),s.yc(4,ue,2,0,"ng-template",4),s.Ob(),s.Pb(5,"mat-tab",5),s.yc(6,fe,2,0,"ng-template",4),s.Ob(),s.Ob(),s.Ob(),s.yc(7,me,4,2,"p",6),s.Ob()),2&e&&(s.zb(1),s.ic("ngClass",s.lc(2,pe,!!t.errorMessage)),s.zb(6),s.ic("ngIf",t.isUsableWithoutApi))},directives:[z.a,i.i,I.c,I.a,I.b,i.k,z.b,W,be],styles:[""],changeDetection:0}),e})();var ge=r("nYR2"),Pe=r("pu8Q");function we(e,t){1&e&&s.Lb(0)}function Oe(e,t){if(1&e&&(s.Nb(0),s.yc(1,we,1,0,"ng-container",9),s.Mb()),2&e){const e=s.dc(3),t=s.oc(5),r=s.oc(9);s.zb(1),s.ic("ngIf",null==e.account?null:e.account.isConfirmed)("ngIfThen",t)("ngIfElse",r)}}function ve(e,t){if(1&e&&(s.Nb(0),s.yc(1,Oe,2,3,"ng-container",8),s.Mb()),2&e){const e=s.dc(2),t=s.oc(7);s.zb(1),s.ic("ngIf",e.token)("ngIfElse",t)}}function ye(e,t){if(1&e&&(s.Pb(0,"mat-card",7),s.yc(1,ve,2,2,"ng-container",8),s.Ob()),2&e){const e=s.dc(),t=s.oc(11);s.zb(1),s.ic("ngIf",!e.isAccountAlreadyConfirmed)("ngIfElse",t)}}function ze(e,t){1&e&&s.Kb(0,"mat-spinner",10)}function Ie(e,t){if(1&e&&(s.Pb(0,"div",11),s.Pb(1,"mat-icon",12),s.Ac(2,"done"),s.Ob(),s.Ob(),s.Pb(3,"p"),s.Tb(4,13),s.Ob(),s.Pb(5,"div",14),s.Kb(6,"span",15),s.Pb(7,"button",16),s.Tb(8,17),s.Ob(),s.Ob()),2&e){const e=s.dc();s.zb(4),s.Vb(e.account.firstName),s.Ub(4)}}function $e(e,t){1&e&&s.Kb(0,"mat-progress-bar",23)}function je(e,t){if(1&e){const e=s.Qb();s.Pb(0,"button",24),s.Zb("click",function(){return s.qc(e),s.dc(2).onRequestConfirmEmail()}),s.Pb(1,"span"),s.Tb(2,25),s.Ob(),s.Pb(3,"mat-icon"),s.Ac(4,"send"),s.Ob(),s.Ob()}}function Te(e,t){if(1&e&&(s.Pb(0,"div",11),s.Pb(1,"mat-icon",12),s.Ac(2,"error_outline"),s.Ob(),s.Ob(),s.Pb(3,"p"),s.Tb(4,18),s.Ob(),s.Pb(5,"p"),s.Tb(6,19),s.Ob(),s.Pb(7,"div",14),s.yc(8,$e,1,0,"mat-progress-bar",20),s.Kb(9,"span",21),s.yc(10,je,5,0,"button",22),s.Ob()),2&e){const e=s.dc();s.zb(8),s.ic("ngIf",e.isProcessing),s.zb(2),s.ic("ngIf",!e.isProcessing)}}function ke(e,t){1&e&&s.Kb(0,"mat-progress-bar",23)}function Se(e,t){if(1&e){const e=s.Qb();s.Pb(0,"button",24),s.Zb("click",function(){return s.qc(e),s.dc(2).onRequestConfirmEmail()}),s.Pb(1,"span"),s.Tb(2,29),s.Ob(),s.Pb(3,"mat-icon"),s.Ac(4,"send"),s.Ob(),s.Ob()}}function Ce(e,t){if(1&e&&(s.Pb(0,"div",11),s.Pb(1,"mat-icon",12),s.Ac(2,"error_outline"),s.Ob(),s.Ob(),s.Pb(3,"p",26),s.Tb(4,27),s.Ob(),s.Pb(5,"p"),s.Tb(6,28),s.Ob(),s.Pb(7,"div",14),s.yc(8,ke,1,0,"mat-progress-bar",20),s.Kb(9,"span",21),s.yc(10,Se,5,0,"button",22),s.Ob()),2&e){const e=s.dc();s.zb(8),s.ic("ngIf",e.isProcessing),s.zb(2),s.ic("ngIf",!e.isProcessing)}}function Ne(e,t){1&e&&(s.Pb(0,"div",11),s.Pb(1,"mat-icon",12),s.Ac(2,"done"),s.Ob(),s.Ob(),s.Pb(3,"p"),s.Tb(4,30),s.Ob(),s.Pb(5,"div",14),s.Kb(6,"span",15),s.Pb(7,"button",16),s.Tb(8,31),s.Ob(),s.Ob())}let De=(()=>{class e{constructor(e,t,r,i,o,a){this.activatedRoute=e,this.changeDetectorRef=t,this.authService=r,this.userService=i,this.dialog=o,this.router=a,this.isLoading=!1,this.isProcessing=!1,this.isAccountAlreadyConfirmed=!1,this.token=void 0,this.account=void 0,this.isDestroyed$=new j.a}ngOnInit(){this.userService.account$.pipe(Object(T.a)(this.isDestroyed$)).subscribe(e=>{var t,r;return this.isAccountAlreadyConfirmed=null!==(t=null==e?void 0:e.isConfirmed)&&void 0!==t&&t,this.token=null!==(r=this.activatedRoute.snapshot.paramMap.get("token"))&&void 0!==r?r:void 0,void 0===this.token?void 0:this.verifyToken(this.token)}).unsubscribe()}ngOnDestroy(){this.isDestroyed$.next(!0),this.isDestroyed$.complete()}onRequestConfirmEmail(){return this.isProcessing=!0,this.userService.account$.pipe(Object(g.a)(e=>{var t;return this.authService.resendConfirmationEmail$(null===(t=e)||void 0===t?void 0:t.email)}),Object(g.a)(e=>this.dialog.open(V).afterClosed()),Object(T.a)(this.isDestroyed$)).subscribe(e=>this.router.navigate(["/"]))}verifyToken(e){return this.isAccountAlreadyConfirmed=!1,this.isLoading=!0,this.authService.confirmEmail$(e).pipe(Object(ge.a)(()=>{this.isLoading=!1,this.changeDetectorRef.detectChanges()}),Object(T.a)(this.isDestroyed$)).subscribe(e=>{this.account=e.account,this.changeDetectorRef.detectChanges()},e=>{var t;(null===(t=e)||void 0===t?void 0:t.message)===w.EmailConfirmed&&(this.isAccountAlreadyConfirmed=!0,this.changeDetectorRef.detectChanges())})}}return e.\u0275fac=function(t){return new(t||e)(s.Jb(o.a),s.Jb(s.h),s.Jb(N),s.Jb(c.a),s.Jb(Z.a),s.Jb(o.b))},e.\u0275cmp=s.Db({type:e,selectors:[["app-confirm-email"]],decls:12,vars:2,consts:function(){let e,t,r,i,o,a,n,s,c,d;return e="Welcome " + "\ufffd0\ufffd" + " ! Your are now a confirmed user !",t="Continue",r="You have not confirmed your email address, verify your inbox and click on the link in the email to continue.",i="You can request a new verification link if the old one has expired.",o="Resend",a="Could not confirm your address.",n="You can request a new verification link if the old one has expired.",s="Resend",c="Everything is ready, your email address has already been verified.",d="Continue",[[1,"centred"],["class","card-alone",4,"ngIf","ngIfElse"],["loadingTemplate",""],["emailConfirmedTemplate",""],["emailNotConfirmedTemplate",""],["emailConfirmErrorTemplate",""],["alreadyConfirmedEmailTemplate",""],[1,"card-alone"],[4,"ngIf","ngIfElse"],[4,"ngIf","ngIfThen","ngIfElse"],["color","accent","diameter","60",1,"m-16"],[1,"center","pb-16"],[1,"status-icon"],e,[1,"button-group","mt-16"],[1,"fill-remain-space"],["mat-raised-button","","color","accent","routerLink","/",1,"rounded"],t,r,i,["mode","indeterminate","color","accent","class","mt-16",4,"ngIf"],[1,"fill-remaining-space"],["mat-raised-button","","class","icon-after rounded","color","accent",3,"click",4,"ngIf"],["mode","indeterminate","color","accent",1,"mt-16"],["mat-raised-button","","color","accent",1,"icon-after","rounded",3,"click"],o,[1,"center"],a,n,s,c,d]},template:function(e,t){if(1&e&&(s.Pb(0,"section",0),s.yc(1,ye,2,2,"mat-card",1),s.Ob(),s.yc(2,ze,1,0,"ng-template",null,2,s.zc),s.yc(4,Ie,9,1,"ng-template",null,3,s.zc),s.yc(6,Te,11,2,"ng-template",null,4,s.zc),s.yc(8,Ce,11,2,"ng-template",null,5,s.zc),s.yc(10,Ne,9,0,"ng-template",null,6,s.zc)),2&e){const e=s.oc(3);s.zb(1),s.ic("ngIf",!t.isLoading)("ngIfElse",e)}},directives:[i.k,z.a,Pe.b,H.a,R.b,o.c,G.a],styles:[".button-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.status-icon[_ngcontent-%COMP%]{font-size:75px;height:75px;width:75px}"],changeDetection:0}),e})(),Me=(()=>{class e{constructor(e){this.dialogRef=e}ngOnInit(){}onClose(){this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(s.Jb(Z.e))},e.\u0275cmp=s.Db({type:e,selectors:[["app-forgot-password-dialog"]],decls:8,vars:0,consts:function(){let e,t,r;return e="Check your mailbox",t="If your email address exists in our database, you will receive a password recovery link at your email address in a few minutes.",r="Ok",[["matDialogTitle",""],e,t,["mat-dialog-actions",""],["mat-raised-button","","color","accent",1,"rounded",3,"click"],r]},template:function(e,t){1&e&&(s.Pb(0,"h2",0),s.Tb(1,1),s.Ob(),s.Pb(2,"mat-dialog-content"),s.Pb(3,"p"),s.Tb(4,2),s.Ob(),s.Ob(),s.Pb(5,"div",3),s.Pb(6,"button",4),s.Zb("click",function(){return t.onClose()}),s.Tb(7,5),s.Ob(),s.Ob())},directives:[Z.f,Z.c,Z.b,R.b],styles:[""],changeDetection:0}),e})();function Ae(e,t){1&e&&(s.Pb(0,"mat-error"),s.Tb(1,14),s.Ob())}function Ee(e,t){1&e&&(s.Pb(0,"mat-error"),s.Tb(1,15),s.Ob())}function Re(e,t){1&e&&(s.Pb(0,"mat-error"),s.Tb(1,16),s.Ob())}function He(e,t){1&e&&s.Kb(0,"mat-progress-bar",17)}function Ge(e,t){1&e&&(s.Pb(0,"button",18),s.Tb(1,19),s.Ob())}function xe(e,t){if(1&e&&(s.Pb(0,"button",20),s.Pb(1,"span"),s.Tb(2,21),s.Ob(),s.Pb(3,"mat-icon"),s.Ac(4,"send"),s.Ob(),s.Ob()),2&e){const e=s.dc();s.ic("disabled",!e.formGroup.valid)}}function Le(e,t){1&e&&s.Lb(0)}function qe(e,t){if(1&e&&(s.Nb(0),s.yc(1,Le,1,0,"ng-container",7),s.Mb()),2&e){s.dc();const e=s.oc(8);s.zb(1),s.ic("ngTemplateOutlet",e)}}function Je(e,t){1&e&&s.Lb(0)}function Be(e,t){if(1&e&&(s.Nb(0),s.yc(1,Je,1,0,"ng-container",7),s.Mb()),2&e){s.dc();const e=s.oc(12);s.zb(1),s.ic("ngTemplateOutlet",e)}}function Fe(e,t){1&e&&s.Lb(0)}function Ke(e,t){if(1&e&&(s.Nb(0),s.yc(1,Fe,1,0,"ng-container",7),s.Mb()),2&e){s.dc();const e=s.oc(10);s.zb(1),s.ic("ngTemplateOutlet",e)}}function Ue(e,t){1&e&&s.Kb(0,"mat-spinner",8)}function _e(e,t){1&e&&(s.Pb(0,"mat-error"),s.Tb(1,23),s.Ob())}function We(e,t){1&e&&(s.Pb(0,"mat-error"),s.Tb(1,24),s.Ob())}function Ye(e,t){1&e&&(s.Pb(0,"mat-error"),s.Tb(1,25),s.Ob())}function Ze(e,t){1&e&&(s.Pb(0,"mat-error"),s.Tb(1,26),s.Ob())}function Ve(e,t){1&e&&(s.Pb(0,"mat-error"),s.Tb(1,27),s.Ob())}function Qe(e,t){1&e&&s.Kb(0,"mat-progress-bar",28)}function Xe(e,t){if(1&e&&(s.Pb(0,"button",29),s.Pb(1,"span"),s.Tb(2,30),s.Ob(),s.Pb(3,"mat-icon"),s.Ac(4,"send"),s.Ob(),s.Ob()),2&e){const e=s.dc(2);s.ic("disabled",!e.formGroup.valid)}}function et(e,t){if(1&e){const e=s.Qb();s.Pb(0,"mat-card-title"),s.Tb(1,9),s.Ob(),s.Pb(2,"mat-card-content",10),s.Pb(3,"form",11),s.Zb("ngSubmit",function(){return s.qc(e),s.dc().onSubmit()}),s.Pb(4,"mat-form-field",12),s.Kb(5,"input",13),s.Pb(6,"mat-label"),s.Tb(7,14),s.Ob(),s.Pb(8,"button",15),s.Zb("click",function(){s.qc(e);const t=s.dc();return t.isPasswordHidden=!t.isPasswordHidden}),s.Pb(9,"mat-icon"),s.Ac(10),s.Ob(),s.Ob(),s.yc(11,_e,2,0,"mat-error",2),s.yc(12,We,2,0,"mat-error",2),s.yc(13,Ye,2,0,"mat-error",2),s.Ob(),s.Pb(14,"mat-form-field",12),s.Kb(15,"input",16),s.Pb(16,"mat-label"),s.Tb(17,17),s.Ob(),s.Pb(18,"button",18),s.Zb("click",function(){s.qc(e);const t=s.dc();return t.isPasswordHidden=!t.isPasswordHidden}),s.Pb(19,"mat-icon"),s.Ac(20),s.Ob(),s.Ob(),s.yc(21,Ze,2,0,"mat-error",2),s.yc(22,Ve,2,0,"mat-error",2),s.Ob(),s.Pb(23,"div",19),s.yc(24,Qe,1,0,"mat-progress-bar",20),s.Kb(25,"span",21),s.yc(26,Xe,5,1,"button",22),s.Ob(),s.Ob(),s.Ob()}if(2&e){const e=s.dc();s.zb(3),s.ic("formGroup",e.formGroup),s.zb(2),s.ic("type",e.isPasswordHidden?"password":"text"),s.zb(3),s.Ab("aria-label","isPasswordHidden password")("aria-pressed",e.isPasswordHidden),s.zb(2),s.Bc(e.isPasswordHidden?"visibility_off":"visibility"),s.zb(1),s.ic("ngIf",null==e.f.password||null==e.f.password.errors?null:e.f.password.errors.required),s.zb(1),s.ic("ngIf",null==e.f.password||null==e.f.password.errors?null:e.f.password.errors.pattern),s.zb(1),s.ic("ngIf",null==e.f.password||null==e.f.password.errors?null:e.f.password.errors.mustNotBeRejected),s.zb(2),s.ic("type",e.isPasswordHidden?"password":"text"),s.zb(3),s.Ab("aria-label","isPasswordHidden password")("aria-pressed",e.isPasswordHidden),s.zb(2),s.Cc(" ",e.isPasswordHidden?"visibility_off":"visibility"," "),s.zb(1),s.ic("ngIf",null==e.f.confirmPassword||null==e.f.confirmPassword.errors?null:e.f.confirmPassword.errors.mustMatch),s.zb(1),s.ic("ngIf",null==e.f.confirmPassword||null==e.f.confirmPassword.errors?null:e.f.confirmPassword.errors.required),s.zb(2),s.ic("ngIf",e.isFormSubmitted),s.zb(2),s.ic("ngIf",!e.isFormSubmitted)}}function tt(e,t){1&e&&s.Kb(0,"mat-progress-bar",28)}function rt(e,t){1&e&&(s.Pb(0,"button",37),s.Pb(1,"span"),s.Tb(2,38),s.Ob(),s.Pb(3,"mat-icon"),s.Ac(4,"open_in_new"),s.Ob(),s.Ob())}function it(e,t){if(1&e&&(s.Pb(0,"div",31),s.Pb(1,"mat-icon",32),s.Ac(2,"error_outline"),s.Ob(),s.Ob(),s.Pb(3,"p",33),s.Tb(4,34),s.Ob(),s.Pb(5,"p"),s.Tb(6,35),s.Ob(),s.Pb(7,"div",19),s.yc(8,tt,1,0,"mat-progress-bar",20),s.Kb(9,"span",21),s.yc(10,rt,5,0,"button",36),s.Ob()),2&e){const e=s.dc();s.zb(8),s.ic("ngIf",e.isFormSubmitted),s.zb(2),s.ic("ngIf",!e.isFormSubmitted)}}function ot(e,t){1&e&&(s.Pb(0,"div",31),s.Pb(1,"mat-icon",32),s.Ac(2,"done"),s.Ob(),s.Ob(),s.Pb(3,"p",33),s.Tb(4,39),s.Ob(),s.Pb(5,"div",19),s.Kb(6,"span",40),s.Pb(7,"button",41),s.Pb(8,"span"),s.Tb(9,42),s.Ob(),s.Pb(10,"mat-icon"),s.Ac(11,"open_in_new"),s.Ob(),s.Ob(),s.Ob())}const at=[{path:"",component:he,canActivate:[d]},{path:"confirm-email",component:De,canActivate:[l]},{path:"confirm-email/:token",component:De,canActivate:[l]},{path:"forgot-password",component:(()=>{class e{constructor(e,t,r,i,o){this.formBuilder=e,this.authService=t,this.router=r,this.snackbarService=i,this.dialog=o,this.isLoading=!1,this.isPasswordHidden=!0,this.errorMessage="",this.isDestroyed$=new j.a,this.formGroup=this.createFormGroup("change")}get f(){return this.formGroup.controls}ngOnInit(){}ngOnDestroy(){this.isDestroyed$.next(!0),this.isDestroyed$.complete()}onSubmit(){var e;return this.isLoading=!0,this.formGroup.disable(),this.authService.forgotPassword$(null===(e=this.f.email)||void 0===e?void 0:e.value).pipe(Object(g.a)(e=>this.dialog.open(Me).afterClosed()),Object(T.a)(this.isDestroyed$)).subscribe(e=>this.router.navigate(["/auth"]),e=>{var t;this.errorMessage=null===(t=e)||void 0===t?void 0:t.message,this.isLoading=!1,this.formGroup.enable()})}createFormGroup(e){return this.formBuilder.group({email:[null,[$.m.required,$.m.email]]},{updateOn:e,validators:this.mustNotBeRejectedValidator()})}mustNotBeRejectedValidator(){return()=>{this.errorMessage===w.EmailNotFound?this.f.email.setErrors({mustNotBeRejected:!0}):""!==this.errorMessage&&this.snackbarService.open(this.errorMessage,"warn"),this.errorMessage=""}}}return e.\u0275fac=function(t){return new(t||e)(s.Jb($.b),s.Jb(N),s.Jb(o.b),s.Jb(M),s.Jb(Z.a))},e.\u0275cmp=s.Db({type:e,selectors:[["app-forgot-password"]],decls:19,vars:7,consts:function(){let e,t,r,i,o,a,n,s;return e="Forgot password",t="Enter your email address to receive instructions on how to change your password.",r="Email address",i="You must fill in this field",o="Not a valid email",a="Please check your email address",n="Sign in",s="Submit",[[1,"centred","anime-zoom-in"],[1,"card-alone"],e,[1,"pt-10"],t,[3,"formGroup","ngSubmit"],["appearance","outline","color","accent",1,"form-field"],r,["matInput","","formControlName","email","color","primary","type","email","autocomplete","email","required",""],[4,"ngIf"],[1,"button-group"],["class","mt-20","mode","indeterminate","color","accent",4,"ngIf"],["type","button","mat-button","","color","accent","routerLink","/auth",4,"ngIf"],["mat-raised-button","","class","icon-after rounded","color","accent","type","submit",3,"disabled",4,"ngIf"],i,o,a,["mode","indeterminate","color","accent",1,"mt-20"],["type","button","mat-button","","color","accent","routerLink","/auth"],n,["mat-raised-button","","color","accent","type","submit",1,"icon-after","rounded",3,"disabled"],s]},template:function(e,t){1&e&&(s.Pb(0,"section",0),s.Pb(1,"mat-card",1),s.Pb(2,"mat-card-title"),s.Tb(3,2),s.Ob(),s.Pb(4,"p",3),s.Tb(5,4),s.Ob(),s.Pb(6,"mat-card-content"),s.Pb(7,"form",5),s.Zb("ngSubmit",function(){return t.onSubmit()}),s.Pb(8,"mat-form-field",6),s.Pb(9,"mat-label"),s.Tb(10,7),s.Ob(),s.Kb(11,"input",8),s.yc(12,Ae,2,0,"mat-error",9),s.yc(13,Ee,2,0,"mat-error",9),s.yc(14,Re,2,0,"mat-error",9),s.Ob(),s.Pb(15,"div",10),s.yc(16,He,1,0,"mat-progress-bar",11),s.yc(17,Ge,2,0,"button",12),s.yc(18,xe,5,1,"button",13),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob()),2&e&&(s.zb(7),s.ic("formGroup",t.formGroup),s.zb(5),s.ic("ngIf",null==t.f.email||null==t.f.email.errors?null:t.f.email.errors.required),s.zb(1),s.ic("ngIf",null==t.f.email||null==t.f.email.errors?null:t.f.email.errors.email),s.zb(1),s.ic("ngIf",null==t.f.email||null==t.f.email.errors?null:t.f.email.errors.mustNotBeRejected),s.zb(2),s.ic("ngIf",t.isLoading),s.zb(1),s.ic("ngIf",!t.isLoading),s.zb(1),s.ic("ngIf",!t.isLoading))},directives:[z.a,z.d,z.b,$.n,$.i,$.d,A.c,A.f,E.a,$.a,$.h,$.c,$.l,i.k,A.b,G.a,R.b,o.c,H.a],styles:[".form-field[_ngcontent-%COMP%]{width:100%}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"],changeDetection:0}),e})(),canActivate:[d]},{path:"reset-password/:id/:token",component:(()=>{class e{constructor(e,t,r,i,o){this.formBuilder=e,this.authService=t,this.snackbarService=r,this.changeDetectorRef=i,this.activatedRoute=o,this.isFormSubmitted=!1,this.isResetPasswordSucceed=!1,this.isResetPasswordFailed=!1,this.accountId=0,this.token="",this.isPasswordHidden=!0,this.errorMessage="",this.isDestroyed$=new j.a,this.formGroup=this.createFormGroup("change")}get f(){return this.formGroup.controls}ngOnInit(){var e,t;return Object(f.a)(this,void 0,void 0,function*(){const r=null!==(e=this.activatedRoute.snapshot.paramMap.get("id"))&&void 0!==e?e:"";this.accountId=""!==r?parseInt(r,10):0,this.token=null!==(t=this.activatedRoute.snapshot.paramMap.get("token"))&&void 0!==t?t:""})}ngOnDestroy(){this.isDestroyed$.next(!0),this.isDestroyed$.complete()}onSubmit(){var e;return this.isFormSubmitted=!0,this.formGroup.disable(),this.isPasswordHidden=!0,this.authService.resetPassword$({newPassword:null===(e=this.f.password)||void 0===e?void 0:e.value},this.accountId,this.token).pipe(Object(ge.a)(()=>{this.isFormSubmitted=!1,this.changeDetectorRef.detectChanges()}),Object(T.a)(this.isDestroyed$)).subscribe(e=>this.isResetPasswordSucceed=!0,e=>{var t;this.errorMessage=null===(t=e)||void 0===t?void 0:t.message,this.errorMessage===w.NewPasswordMustBeDifferentFromCurrent?(this.isFormSubmitted=!1,this.formGroup.enable(),this.f.password.setErrors({mustNotBeRejected:!0}),this.errorMessage=""):this.isResetPasswordFailed=!0})}createFormGroup(e,t){const r=this.formBuilder.group({password:[null,[$.m.required,$.m.pattern(/^.{8,191}$/)]],confirmPassword:[null,[$.m.required]]},{updateOn:e,validators:[Y("password","confirmPassword"),this.mustNotBeRejectedValidator()]});return void 0!==t&&r.setValue(t),r}mustNotBeRejectedValidator(){return()=>{""!==this.errorMessage&&this.snackbarService.open(this.errorMessage,"warn"),this.errorMessage=""}}}return e.\u0275fac=function(t){return new(t||e)(s.Jb($.b),s.Jb(N),s.Jb(M),s.Jb(s.h),s.Jb(o.a))},e.\u0275cmp=s.Db({type:e,selectors:[["app-reset-password"]],decls:13,vars:3,consts:function(){let e,t,r,i,o,a,n,s,c,d,l,b,u,f,m,p;return e="Set your new password",t="Password",r="Toggle password visibility",i="Confirm password",o="Toggle password visibility",a="You must fill in this field",n="Must contain 8+ characters",s="New password must be different from current",c="Passwords doesn't match",d="You must confirm the password",l="Submit",b="Could not reset your password.",u="You can request a new verification link if the old one has expired.",f="Forgot password",m="You have just changed your password, you can now authenticate yourself.",p="Sign in",[[1,"centred"],[1,"p-20","auth-card"],[4,"ngIf"],["loadingTemplate",""],["setNewPasswordTemplate",""],["resetPasswordFailedTemplate",""],["resetPasswordSuccessTemplate",""],[4,"ngTemplateOutlet"],["color","accent"],e,[1,"pt-10"],[3,"formGroup","ngSubmit"],["appearance","outline","color","accent",1,"form-field"],["matInput","","formControlName","password","autocomplete","new-password","required","",3,"type"],t,["type","button","mat-icon-button","","matSuffix","","aria-label",r,3,"click"],["matInput","","formControlName","confirmPassword","required","",3,"type"],i,["type","button","mat-icon-button","","matSuffix","","aria-label",o,3,"click"],[1,"button-group"],["mode","indeterminate","color","accent",4,"ngIf"],[1,"fill-remaining-space"],["mat-raised-button","","class","icon-after rounded","color","accent","type","submit",3,"disabled",4,"ngIf"],a,n,s,c,d,["mode","indeterminate","color","accent"],["mat-raised-button","","color","accent","type","submit",1,"icon-after","rounded",3,"disabled"],l,[1,"center"],[1,"status-icon"],[1,"center","py-10"],b,u,["mat-raised-button","","class","icon-after rounded","color","accent","routerLink","/auth/forgot-password",4,"ngIf"],["mat-raised-button","","color","accent","routerLink","/auth/forgot-password",1,"icon-after","rounded"],f,m,[1,"fill-remain-space"],["mat-raised-button","","color","accent","routerLink","/auth",1,"icon-after","rounded"],p]},template:function(e,t){1&e&&(s.Pb(0,"section",0),s.Pb(1,"mat-card",1),s.yc(2,qe,2,1,"ng-container",2),s.yc(3,Be,2,1,"ng-container",2),s.yc(4,Ke,2,1,"ng-container",2),s.Ob(),s.Ob(),s.yc(5,Ue,1,0,"ng-template",null,3,s.zc),s.yc(7,et,27,16,"ng-template",null,4,s.zc),s.yc(9,it,11,2,"ng-template",null,5,s.zc),s.yc(11,ot,12,0,"ng-template",null,6,s.zc)),2&e&&(s.zb(2),s.ic("ngIf",!t.isResetPasswordFailed&&!t.isResetPasswordSucceed),s.zb(1),s.ic("ngIf",t.isResetPasswordSucceed),s.zb(1),s.ic("ngIf",t.isResetPasswordFailed))},directives:[z.a,i.k,i.o,Pe.b,z.d,z.b,$.n,$.i,$.d,A.c,E.a,$.a,$.h,$.c,$.l,A.f,R.b,A.g,H.a,A.b,G.a,o.c],styles:[".auth-card[_ngcontent-%COMP%]{max-width:400px}.status-icon[_ngcontent-%COMP%]{font-size:75px;height:75px;width:75px}.form-field[_ngcontent-%COMP%]{width:100%}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"],changeDetection:0}),e})()}];let nt=(()=>{class e{}return e.\u0275mod=s.Hb({type:e}),e.\u0275inj=s.Gb({factory:function(t){return new(t||e)},imports:[[i.c,o.f.forChild(at),b.a]]}),e})()}}]);